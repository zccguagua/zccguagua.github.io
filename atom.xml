<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Orange个人博客</title>
  
  <subtitle>我见青山多妩媚</subtitle>
  <link href="https://zcccool.cn/atom.xml" rel="self"/>
  
  <link href="https://zcccool.cn/"/>
  <updated>2022-02-16T15:37:17.792Z</updated>
  <id>https://zcccool.cn/</id>
  
  <author>
    <name>ZhengChengcheng</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>羽毛球知识</title>
    <link href="https://zcccool.cn/2022/01/01/%E7%BE%BD%E6%AF%9B%E7%90%83%E7%9F%A5%E8%AF%86/"/>
    <id>https://zcccool.cn/2022/01/01/%E7%BE%BD%E6%AF%9B%E7%90%83%E7%9F%A5%E8%AF%86/</id>
    <published>2021-12-31T17:02:30.000Z</published>
    <updated>2022-02-16T15:37:17.792Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/badminton/badminton1.jpg" title="羽毛球"></p><p>最近在网上看羽毛球拍，被球拍的名字搞得云里雾里，刚好趁机一边学习一边整理一下羽毛球的相关小知识</p><h3 id="关于厂商"><a href="#关于厂商" class="headerlink" title="关于厂商"></a>关于厂商</h3><p>主要三大厂商 VICTOR 胜利(蓝厂)，YONEX尤尼克斯(绿厂),李宁</p><h3 id="关于选拍"><a href="#关于选拍" class="headerlink" title="关于选拍"></a>关于选拍</h3><p>球拍的选择可以参考中羽在线的这篇帖子<br><a href="https://bbs.badmintoncn.com/forum.php?mod=viewthread&tid=1701616&extra=page=1&filter=digest&digest=1">理性烧拍法则</a></p><p>球拍本身没有单打拍、双打拍的区分，只能说一个拍子更适合用来单打还是双打。<br>总的来说排头重一些的球拍适合单打，排头重杀球更具威力；排头轻一点、挥速快的拍子更适合双打，因为双打节奏很快。</p><p>排头重、杆硬的拍子如VTZF2(二姐夫),需要一定的力量来驾驭，力量不足给人的感觉就是球打不动，打不远，或者第二天手臂酸痛、肩关节损伤。所以新手还是建议选个自己能驾驭的轻一点的拍子、选4U的 。</p><p><a href="https://www.bilibili.com/video/BV1ZT4y1o7FP?from=search&seid=6490548011746186614">B站up主胖虎憨憨z对一些球拍的介绍</a></p><p>ps：<br>1.胜利球拍有两个产地一个在台湾一个在南京，台湾产的底盖上会印有”TAIWAN”,据说台湾产的会比南京产的好一些<br>2.据说天斧100zz一场比赛安赛龙打断过两根<br>3.中羽在线是个功能丰富的网站，可以学到很多知识，包括了解拍子的使用感受、辨别球拍真假、学习羽毛球技术还有个跳瘙市场是个买卖球拍的平台</p><p><a href="https://bbs.badmintoncn.com/">中羽在线</a></p><h3 id="关于球拍线"><a href="#关于球拍线" class="headerlink" title="关于球拍线"></a>关于球拍线</h3><p>俗话说三分拍七分线剩下九十分要靠练。</p><p>总的来说就是拍线越粗越耐打，但是弹性相对差些；越细弹性越好，但就不是很耐打，更容易断线。<br>尤尼克斯的线根据包装袋的颜色来区分，<br>黄色包装为耐打线（如BG65、BG675TI、NBG95），蓝色包装为高弹线（如BG80、BG80P、BG66U、NBG98）, 红色包装为音效线（如BG85）,绿色包装为操控线（如BGAB、NBG99）<br>胜利使用人数最多的线是VBS66N<br>李宁的7号线评价不怎么样，1号线评价不错</p><h3 id="关于磅数"><a href="#关于磅数" class="headerlink" title="关于磅数"></a>关于磅数</h3><p>参考文章</p><div class="row">    <embed src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/pdf/yumaoqiubangshu.pdf" width="100%" height="550" type="application/pdf"></div><p>总的来说就是高磅击球感更硬，出球越快，更精准，但对力量的要求更高；低磅弹性好点，更省力，但是没有很精准。<br>低磅（20以下）、中低磅（20-23）、中磅（23-25）、中高磅（25-27）、高磅（28以上）。<br>初学者、入门学者选24磅就行<br><a href="https://www.bilibili.com/video/BV1wg41157XD?from=search&seid=343775227409293790">B站up主胖虎憨憨z对磅数的介绍</a><br>ps:羽毛球国家队男运动员一般31、32磅，女运动员一般29、30磅；谌龙33磅，郑思维、黄雅琼、陈雨菲30磅；山口茜24-26磅</p><h3 id="关于发球"><a href="#关于发球" class="headerlink" title="关于发球"></a>关于发球</h3><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/yumaoqiufaqiu.jpg" alt="发球区域" title="羽毛球"></p><p>如图左边黄色框为单打场地范围，绿色区域为单打发球区域；右边红色框为双打场地范围，蓝色区域为双打发球区。压线算界内。</p><h4 id="发球规则"><a href="#发球规则" class="headerlink" title="发球规则"></a>发球规则</h4><p>1.在一局比赛刚开始时，都应从右发球区发球。<br>2.只有接发球员才能接发球；如果他的同伴去接球或被球触及，发球方得一分。<br>2.在该局本方得分为0或双数时，都必须在右发球区发球或接发球；得分为单数时，则应在左发球区发球或接发球。<br>3.发球方得一分时，原发球员继续发球（连发）。<br>4.只有本方连发的时候本方球员会交换左右场地去接发球，除此以外，运动员继续站在上一回合的各自发球区不变，以此保证发球员的交替。</p><h3 id="世界羽联排名"><a href="#世界羽联排名" class="headerlink" title="世界羽联排名"></a>世界羽联排名</h3><p><a href="https://bwfbadminton.com/rankings/">世界羽联 BWF排名</a><br><a href="https://www.badmintoncn.com/ranking.php">中羽在线排名</a></p><h3 id="关于约球"><a href="#关于约球" class="headerlink" title="关于约球"></a>关于约球</h3><p>羽毛球其实是一项非常费钱的运动，高端拍每支1000+，一桶亚狮龙7号球70￥左右，每次打球两小时平均消耗5+个。场地费一小时30左右。只算球与场地的花费以一周打一次算，一年可能要花费4k多。此时就需要找人一起打，费用aa来减少花费。<br>想找人一起打球的话可以手机下载中羽联app，查找自己附近的羽毛球俱乐部，加入进去一起打。俱乐部几乎每天都会组织人员一起打球，球费aa很划算。<br><a href="http://www.zhongyulian.com/">中羽联</a></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>1.众所周知，羽毛球单打与双打是两项完全不同的运动<br>2.启动速度、反应速度很重要<br>3.步伐很重要<br>4.发力需要不断练习<br><a href="https://zhuanlan.zhihu.com/p/374482279">5.世界上球速最快的球类运动是羽毛球</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="羽毛球" scheme="https://zcccool.cn/tags/%E7%BE%BD%E6%AF%9B%E7%90%83/"/>
    
  </entry>
  
  <entry>
    <title>2021年度总结</title>
    <link href="https://zcccool.cn/2021/12/30/2021%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"/>
    <id>https://zcccool.cn/2021/12/30/2021%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/</id>
    <published>2021-12-30T15:35:45.000Z</published>
    <updated>2022-01-15T15:31:54.272Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/2021zj/badminton.jpg" title="badminton"></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>从来没写过年度总结，感觉日子就是每天Ctrl C+Ctrl V复制粘贴,没什么好写的。刚好年末很多手机app走出了总结报告。就以此为基础看下自己一年都干了些什么。</p><h3 id="豆瓣"><a href="#豆瓣" class="headerlink" title="豆瓣"></a>豆瓣</h3><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/2021zj/douban1.jpg" title="豆瓣"></p><p>123部影视中，很多是以前看过的，只是标记了一下已看，有些在B站上看up的讲解，过一下剧情也算看过。</p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/2021zj/douban2.jpg" title="豆瓣"></p><p>看了15本书<br>《亲密关系》受益匪浅，非常不错，有空会多读几遍<br>《你当像鸟飞往你的山》关于教育<br>《巨人的陨落》、《卡拉马佐夫兄弟》大部头<br>《树上的男爵》、《不存在的骑士》、《分成两半的子爵》关于人如何实现自我的经验<br>《刀锋》、《醉步男》、《潮骚》、《字母表谜案》、《许三观卖血记》小说<br>《寂寞的游戏》孤独、抑郁<br>《拖延心理学》拒绝拖延</p><h3 id="网易云音乐"><a href="#网易云音乐" class="headerlink" title="网易云音乐"></a>网易云音乐</h3><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/2021zj/yinyue.jpg" title="音乐"></p><p>今年使用网易云听歌不多,随便听听。</p><h3 id="B站"><a href="#B站" class="headerlink" title="B站"></a>B站</h3><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/2021zj/b.jpg" title="B站"></p><p>490小时 真有你的，天天在刷B站。主要看的是些影视讲解吧，绝对不是小姐姐，不是。</p><h3 id="支付宝"><a href="#支付宝" class="headerlink" title="支付宝"></a>支付宝</h3><p>点了17次外卖，蚂蚁森林产生52.2kg绿色能量，今年的基金要死不活的，亏了5k多</p><h3 id="steam-主机游戏"><a href="#steam-主机游戏" class="headerlink" title="steam 主机游戏"></a>steam 主机游戏</h3><p>《无主之地3》 居然已经玩了200多小时<br>《Ori and the Will of the Wisps》 很喜欢的游戏<br>《Resident Evil 3》 让人害怕<br>《刺客信条-起源》 世界庞大<br>《孤岛惊魂5》 玩多了头晕，弃</p><h3 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h3><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/2021zj/bug.PNG" title="禅道"></p><p>公司的禅道升级了，可以看到年度总结了，一共解决了563个bug呢，可以养活好几个测试了。<br>钉钉统计加班约300多小时。。。</p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>今年体重重了差不多5斤<br>今年唯一出的远门就是五一去了乌镇<br>今年买了房子，加入房奴大军</p><h3 id="小目标"><a href="#小目标" class="headerlink" title="小目标"></a>小目标</h3><p>2022年定个小目标吧<br>1.体重控制到145<br>2.少看剧少打游戏多看书，看5本书<br>3.羽毛球熟练运用双脚跳杀（应该不难吧）<br>4.早睡早起（这个很难做到）<br>5.拒绝拖延（这。。。）<br>6.学习知识（学啥。。。）</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="总结" scheme="https://zcccool.cn/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>V2ray客户端</title>
    <link href="https://zcccool.cn/2021/12/16/V2ray%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
    <id>https://zcccool.cn/2021/12/16/V2ray%E5%AE%A2%E6%88%B7%E7%AB%AF/</id>
    <published>2021-12-16T15:06:12.000Z</published>
    <updated>2021-12-31T17:03:50.747Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_18.jpg" title="nextcloud"></p><h3 id="什么是墙"><a href="#什么是墙" class="headerlink" title="什么是墙"></a>什么是墙</h3><p>防火长城（英语：Great Firewall，常用简称：GFW），中文也称中国国家防火墙，俗称墙、网络长城、防火墙等等，中国国家互联网信息办公室称为数据跨境安全网关，是中华人民共和国政府监控和过滤互联网国际出口内容的软硬件系统集合。随着使用的拓广，“墙”有时也被用作动词，中国网友所说的“被墙”即指网站内容被防火长城所屏蔽或者指服务器的通讯被封阻，“翻墙”也被引申为突破网络审查浏览中国大陆境外被屏蔽的网站或使用服务的行为。–维基百科</p><h3 id="V2ray是什么"><a href="#V2ray是什么" class="headerlink" title="V2ray是什么"></a>V2ray是什么</h3><p>V2Ray，是Victoria Raymond以及其社群团队开发的Project V下的一个工具。Project V是一个工具集合，号称可以帮助其使用者打造专属的基础通信网络。Project V的核心工具称为V2Ray，其主要负责网络协议和功能的实现，与其它Project V通信。V2Ray可以单独运行，也可以和其它工具配合，以提供简便的操作流程。开发过程主要使用Go语言，Core采用MIT许可证并开放源代码。<br>在中国大陆，本工具广泛用于突破防火长城（GFW），以访问被封锁和屏蔽的内容。–维基百科</p><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><table><thead><tr><th>客户端</th><th>下载地址</th><th>配置教程</th></tr></thead><tbody><tr><td><a href="https://help.loliloli.live/jiao-cheng/ios/xiao-huo-jian-shadowrocket">Shadowrocket（小火箭）</a></td><td><a href="https://apps.apple.com/us/app/shadowrocket/id932747118">IOS下载</a></td><td><a href="https://maofun.com/671.html">配置教程</a></td></tr><tr><td>Quantumult</td><td><a href="https://apps.apple.com/us/app/quantumult/id1252015438">IOS下载</a></td><td></td></tr><tr><td>Potasto Lite(免费)</td><td><a href="https://apps.apple.com/us/app/potatso-lite/id1239860606">IOS下载</a></td><td></td></tr><tr><td><a href="https://github.com/shadowsocks">ShadowsocksR（SSR）</a></td><td><a href="https://github.com/shadowsocks/shadowsocks-windows">Windows下载</a></td><td><a href="https://v2xtls.org/shadowsocksr-ssr-windows%e5%ae%a2%e6%88%b7%e7%ab%af%e9%85%8d%e7%bd%ae%e6%95%99%e7%a8%8b/">配置教程</a></td></tr><tr><td></td><td><a href="https://github.com/shadowsocks/shadowsocks-android">Android下载</a></td><td><a href="https://v2xtls.org/shadowsocksr-ssr-windows%e5%ae%a2%e6%88%b7%e7%ab%af%e9%85%8d%e7%bd%ae%e6%95%99%e7%a8%8b/">配置教程</a></td></tr><tr><td><a href="https://qv2ray.net/lang/zh/">Qv2ray</a></td><td><a href="https://github.com/Qv2ray/Qv2ray">Linux、Windows、Mac</a></td><td><a href="https://qv2ray.net/lang/zh/getting-started/">使用教程</a></td></tr><tr><td><a href="https://github.com/Dreamacro/clash">Clash</a></td><td><a href="https://github.com/Fndroid/clash_for_windows_pkg">Windows下载</a></td><td><a href="https://v2xtls.org/clash-for-windows%e9%85%8d%e7%bd%aev2ray%e6%95%99%e7%a8%8b/">配置教程</a></td></tr><tr><td>Clash</td><td><a href="https://github.com/Kr328/ClashForAndroid">Android下载</a></td><td><a href="https://v2xtls.org/clash-for-android%e9%85%8d%e7%bd%aev2ray%e6%95%99%e7%a8%8b/">配置教程</a></td></tr><tr><td>clashX</td><td><a href="https://github.com/yichengchen/clashX">Mac下载</a></td><td><a href="https://v2xtls.org/clashx%e9%85%8d%e7%bd%aev2ray%e6%95%99%e7%a8%8b/">配置教程</a></td></tr><tr><td>ShadowsocksX-NG</td><td><a href="https://github.com/shadowsocks/ShadowsocksX-NG">Mac下载</a></td><td></td></tr><tr><td>V2rayNG</td><td><a href="https://github.com/2dust/v2rayNG">Android下载</a></td><td><a href="https://v2xtls.org/v2rayng%e9%85%8d%e7%bd%ae%e6%95%99%e7%a8%8b/">配置教程</a></td></tr><tr><td>Netch</td><td><a href="https://github.com/netchx/netch/releases">Windows下载</a></td><td></td></tr><tr><td>v2rayN</td><td><a href="https://github.com/2dust/v2rayN">Windows下载</a></td><td></td></tr></tbody></table><p><a href="https://tlanyan.pp.ua/v2ray-clients-download/">参考地址</a></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p><a href="https://github.com/getlantern/lantern">Lantern</a></p><p><a href="http://milou.cc/">Milou云</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="V2ray" scheme="https://zcccool.cn/tags/V2ray/"/>
    
  </entry>
  
  <entry>
    <title>小皮面板搭建nextcloud网盘</title>
    <link href="https://zcccool.cn/2021/11/14/%E5%B0%8F%E7%9A%AE%E9%9D%A2%E6%9D%BF%E6%90%AD%E5%BB%BAnextcloud%E7%BD%91%E7%9B%98/"/>
    <id>https://zcccool.cn/2021/11/14/%E5%B0%8F%E7%9A%AE%E9%9D%A2%E6%9D%BF%E6%90%AD%E5%BB%BAnextcloud%E7%BD%91%E7%9B%98/</id>
    <published>2021-11-14T07:32:01.000Z</published>
    <updated>2021-11-19T16:55:27.221Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_19.jpg" title="nextcloud"></p><h3 id="安装小皮面板"><a href="#安装小皮面板" class="headerlink" title="安装小皮面板"></a>安装小皮面板</h3><p>小皮面板：轻巧,便捷,功能强大,是国内最早,最知名的的免费集成环境，类似与宝塔。功能强大见者欣喜若狂。</p><p><a href="https://www.xp.cn/">小皮面板网址</a></p><p>注意：小皮面板提示请确保您的系统是纯静的,未安装任何环境中涉及到的（Apache\Nginx\php\MySQL\FTP） 于是我先把自己的服务器重置了</p><p>我的系统是centos7.8 选择对应安装脚本命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh https://download.xp.cn/install.sh &amp;&amp; sh install.sh</span><br></pre></td></tr></table></figure><p>稍等片刻 终端会由成功提示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">=================安装完成==================</span><br><span class="line"></span><br><span class="line">请用浏览器访问面板:</span><br><span class="line">外网:http://ip:9080/授权码</span><br><span class="line">内网:http://ip:9080/授权码</span><br><span class="line">系统初始账号:admin 系统初始密码:mdTVCZu9V6 官网:https://www.xp.cn</span><br><span class="line">如果使用的是云服务器，请至安全组开放9080端口 如果使用ftp，请开放21以及30000-30050端口</span><br><span class="line"></span><br><span class="line">===========================================</span><br></pre></td></tr></table></figure><p>如提示要在服务器安全组打开9080端口，ftp的21端口和30000-30050端口。在浏览器地址输入“<a href="http://ip:9080/%E6%8E%88%E6%9D%83%E7%A0%81%E2%80%9D%E5%8D%B3%E5%8F%AF%E6%89%93%E5%BC%80%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%95%8C%E9%9D%A2">http://ip:9080/授权码”即可打开控制台界面</a></p><h3 id="小皮面板安装数据库"><a href="#小皮面板安装数据库" class="headerlink" title="小皮面板安装数据库"></a>小皮面板安装数据库</h3><p>先在小皮面板软件管理里安装Apache(我用是是Apache，nginx没试过，应该是一样的)、php、MySQL等软件</p><p>点击添加数据库，自己定义数据库信息，记住账号密码，到时候需要。如数据库名:nextcloud,用户名：nextcloud,密码：123456，访问权限选择所有人</p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/nextcloud/nextcloud_1.png" alt="安装数据库" title="安装数据库"></p><h3 id="新建站点"><a href="#新建站点" class="headerlink" title="新建站点"></a>新建站点</h3><p>点击网站–添加站点，站点域名填写：abc.cn:8888，abc.cn是自己都买的域名，8888是用于nextcloud的端口号 点击保存即可。</p><p>ps：天翼云的80端口使用需要先备案，没备案的话可使用其他端口，我使用的是8888<br>ps：这里用到的8888端口同样要在服务器安全组打开。</p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/nextcloud/nextcloud_2.png" alt="新建站点" title="新建站点"></p><h3 id="创建nextcloud"><a href="#创建nextcloud" class="headerlink" title="创建nextcloud"></a>创建nextcloud</h3><p>nextcloud:开源免费的私有云存储项目，它能帮你快速在个人电脑或服务器上架设一套专属的私有云文件同步网盘。 跨平台支持windows 、mac、Android、iOS、Linux等平台</p><p><a href="https://nextcloud.com/">nextcloud官网</a></p><p><a href="https://github.com/nextcloud/server">nextcloud GitHub</a></p><p>去nextcloud GitHub下载两个东西，一个是源码包我用的是版本22.2.1，下载后文件名server-22.2.1.zip，另一个是这个3rdparty压缩包<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/nextcloud/nextcloud_3.png" alt="nextcloud" title="nextcloud"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/nextcloud/nextcloud_4.png" alt="nextcloud" title="nextcloud"></p><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>上传server-22.2.1.zip压缩包到你的站点目录，就是刚刚新建的/www/admin/abc.cn_8888/wwwroot<br>鼠标移到压缩包上解压，点击解压，解压成功后将service-22.2.1文件夹中的所有文件剪切到wwwroot的目录<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/nextcloud/nextcloud_5.png" alt="nextcloud" title="nextcloud"><br>注意这个3rdparty目录，默认是空的，需要将上一步下载的3rdparty包同样上传并解压到自己的这个3rdparty中。如果3rdparty是空的打开网页会提示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Composer autoloader not found, unable to continue.</span><br><span class="line">Check the folder &quot;3rdparty&quot;. </span><br><span class="line">Running &quot;git submodule update --init&quot; will initialize the git submodule that</span><br><span class="line">handles the subfolder &quot;3rdparty&quot;.</span><br></pre></td></tr></table></figure><p>到此nextcloud部署结束 在浏览器输入:你的域名:8888,不出意外即可打开nextcloud界面<br>在界面上创建管理员账号，密码,配置数据库选择mysql，用户名、密码、数据库名都是刚刚设置的，端口号mysql默认是3306，点击安装完成，稍等片库即可大功告成</p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/nextcloud/nextcloud_6.png" alt="nextcloud" title="nextcloud"></p><h3 id="云盘界面"><a href="#云盘界面" class="headerlink" title="云盘界面"></a>云盘界面</h3><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/nextcloud/nextcloud_7.png" alt="nextcloud" title="nextcloud"></p><p><a href="http://zccode.cn:10000/index.php/s/7MSYktNzaqnGxED">自己配置网盘分享张图片http://zccode.cn:10000/index.php/s/7MSYktNzaqnGxED</a></p><p>ps:在appstore和谷歌商店下载各端的nextcloud，可以多端共享</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="nextcloud" scheme="https://zcccool.cn/tags/nextcloud/"/>
    
  </entry>
  
  <entry>
    <title>搭建FTP服务器</title>
    <link href="https://zcccool.cn/2021/11/10/%E6%90%AD%E5%BB%BAFTP%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>https://zcccool.cn/2021/11/10/%E6%90%AD%E5%BB%BAFTP%E6%9C%8D%E5%8A%A1%E5%99%A8/</id>
    <published>2021-11-09T16:27:44.000Z</published>
    <updated>2021-11-24T15:59:01.378Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_20.jpg" title="ftp"></p><p>前段时间阿里云服务器到期了，趁着双11换了一个2核4g的天翼云服务器，记录一下安装FTP服务器过程<br>ps:天翼云服务器在没有备案的情况下，是使用不了80，8080，443等端口的，配置了安全组也不行，搞的当时不明所以浪费了很多时间</p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p>安装ftp服务器可参考下方教程<br> <a href="https://help.aliyun.com/document_detail/60152.html?spm=5176.22414175.sslink.2.1ea4617cUgE4Zb">阿里云ftp教程</a><br> <a href="https://www.ctyun.cn/h5/help2/10000015/10553754">天翼云ftp教程</a></p><h3 id="安装FTP服务器"><a href="#安装FTP服务器" class="headerlink" title="安装FTP服务器"></a>安装FTP服务器</h3> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install vsftpd -y</span><br><span class="line">systemctl enable vsftpd.service    #设置FTP服务开机自启动</span><br><span class="line">systemctl start vsftpd.service      #启动FTP服务</span><br><span class="line">systemctl stop vsftpd.service      #停止FTP服务</span><br><span class="line">netstat -antup | grep ftp       #查看FTP服务的端口号</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">useradd ftpadmin    #创建“ftpadmin”用户</span><br><span class="line">passwd ftpadmin     #按照提示设置“ftpadmin”用户密码</span><br><span class="line">mkdir /var/ftp/pub  #创建供FTP使用的文件目录</span><br><span class="line">chown -R ftpadmin:ftpadmin /var/ftp/pub #更改文件目录所有者</span><br></pre></td></tr></table></figure><p>修改配置文件,执行以下命令打开配置文件“vsftpd.conf”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure><p>设置以下参数，不允许匿名登录FTP服务器，允许本地用户登录FTP服务器，并指定FTP本地用户使用的文件目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">anonymous_enable=NO              #不允许匿名登录FTP服务器</span><br><span class="line">local_enable=YES                 #允许本地用户登录FTP服务器</span><br><span class="line">local_root=/var/ftp/work01       #FTP本地用户使用的文件目录</span><br></pre></td></tr></table></figure><p>设置以下参数，限制用户只能访问自身的主目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chroot_local_user=YES                      #所有用户都被限制在其主目录</span><br><span class="line">chroot_list_enable=YES                     #启用例外用户名单</span><br><span class="line">chroot_list_file=/etc/vsftpd/chroot_list   #例外用户名单</span><br><span class="line">allow_writeable_chroot=YES                </span><br></pre></td></tr></table></figure><p>被动模式除了需要配置主动模式所需的所有参数外，还需要配置的参数如下：<br>设置以下参数，配置FTP支持被动模式。并指定FTP服务器的公网IP地址，以及可供访问的端口范围，端口范围请根据实际环境进行设置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">listen=YES                           </span><br><span class="line">listen_ipv6=NO                       </span><br><span class="line">pasv_address=xx.xx.xx.xx      #FTP服务器的公网IP地址</span><br><span class="line">pasv_min_port=50000            #被动模式下的最小端口</span><br><span class="line">pasv_max_port=50010            #被动模式下的最大端口</span><br></pre></td></tr></table></figure><p>ps:ftp的默认端口应该是21，要去服务器控制台去配置安全组开放21及上方端口号<br>按Esc键退出编辑模式，并输入:wq保存后退出。<br>在“/etc/vsftpd/”目录下创建“chroot_list”文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch chroot_list</span><br></pre></td></tr></table></figure><p>“chroot_list”文件是限制在主目录下的例外用户名单。如果需要设置某个用户不受只可以访问其主目录的限制，可将对应的用户名写入该文件。</p><p>如果没有例外也必须要有“chroot_list”文件，内容可为空。<br>执行以下命令重启vsftpd服务使配置生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service vsftpd restart</span><br></pre></td></tr></table></figure><p>测试</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp localhost   #quit可退出</span><br></pre></td></tr></table></figure><p> 如果-bash: ftp: command not found<br> FTP命令没有安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install ftp</span><br></pre></td></tr></table></figure><h3 id="配置网络防火墙"><a href="#配置网络防火墙" class="headerlink" title="配置网络防火墙"></a>配置网络防火墙</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld.service   #开启防火墙</span><br><span class="line">systemctl enable firewalld.service  #防火墙开机启动</span><br><span class="line">systemctl stop firewalld.service    #关闭防火墙</span><br><span class="line">firewall-cmd --reload   #重启防火墙</span><br><span class="line">firewall-cmd --state    #查看防火墙状态</span><br><span class="line">firewall-cmd --list-ports   #查看开放的端口</span><br><span class="line">firewall-cmd --permanent --zone=public --add-port=8080-8083/tcp #添加多个端口</span><br><span class="line">firewall-cmd --permanent --zone=public --remove-port=81/tcp #删除某个端口</span><br><span class="line">netstat -inpt   #查看各接口监听</span><br><span class="line">netstat -an | grep 8989    #查看端口是否正常监听</span><br></pre></td></tr></table></figure><h3 id="使用FTP"><a href="#使用FTP" class="headerlink" title="使用FTP"></a>使用FTP</h3><p>在windows电脑文件路径栏输入ftp:ip</p><p>输入用户名密码就可以查看与上传文件了</p><p>ubuntu可以使用fileZilla连接,Android手机和iPhone都可以下载FTP应用app，这样可以多端共享了</p><p>ps:谷歌浏览器从90版本开始去除了FTP连接，试了火狐和edge都不能打开FTP了<br>ps:开启FTP服务器后控制台查看cpu使用率会飙升到100%，不知道为什么</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="FTP" scheme="https://zcccool.cn/tags/FTP/"/>
    
  </entry>
  
  <entry>
    <title>买房历程</title>
    <link href="https://zcccool.cn/2021/10/18/%E4%B9%B0%E6%88%BF%E5%8E%86%E7%A8%8B/"/>
    <id>https://zcccool.cn/2021/10/18/%E4%B9%B0%E6%88%BF%E5%8E%86%E7%A8%8B/</id>
    <published>2021-10-18T14:38:09.000Z</published>
    <updated>2021-11-24T15:59:01.286Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/BurningHouse.png" title="买房"></p><h3 id="沟通准备"><a href="#沟通准备" class="headerlink" title="沟通准备"></a>沟通准备</h3><p>过年的时候跟家里人沟通了一下买房的打算，父母愿意拿出多年积蓄资助买房。说实话，打工人靠攒自己的工资不知何年何月才能买房，工资的涨幅永远赶不上房价的涨幅。<br>5月8日，同事推荐给我他买房时候的中介，然后就和中介聊聊，给他提自己的需求：房型，单价，区域，新房/二手，他会给你推荐房源。<br>中介会把他手上的房子资料整理给你看。</p><h3 id="看房"><a href="#看房" class="headerlink" title="看房"></a>看房</h3><p>中介都很热情，会经常打电话邀请你有空看房，看房都是车接车送。跟中介提前说好要看房，他提前联系房东，拿钥匙。<br>6月12日端午节，和同学还有同事一起看房，先看的二手房，房型还行，房龄十年，靠近地铁，价格略高，有待考虑。<br>之后中介又带我们看远一点的新房，在地铁底站，距离有点远，是精装修的，价格也高，两年后交付，（很多新房当时买都是两年后交付）周围人烟稀少。<br>新房的样板间特别漂亮，看完根本不想考虑二手房了，于是考虑买新房。</p><h3 id="看新房流程"><a href="#看新房流程" class="headerlink" title="看新房流程"></a>看新房流程</h3><p>置业顾问：售楼部的工作人员，与中介不同，中介属于中介公司，置业顾问属于开发商。置业顾问不用在外跑，中介把人带到售楼部，接下来的工作都由置业顾问来做，没中介啥事了（ps置业顾问嘴皮子都很溜）<br>1.置业顾问会介绍房子的位置学区、周边环境与未来规划<br>2.然后会介绍房间户型微型模型<br>3.有样板间的话会带你进样板间每个房间讲解一下，样板间很漂亮<br>4.然后就会跟你聊自己的预算，会帮你计算一下总价与贷款<br>5.通常置业顾问会希望你现场付定金，有时候会跟你说房源紧张，给你一种错过就买不到的感觉。说回去考虑就行，毕竟要货比三家。<br>6.之后几天置业顾问会联系你考虑怎么样，是否愿意买</p><h3 id="继续看房"><a href="#继续看房" class="headerlink" title="继续看房"></a>继续看房</h3><p>6月27日，在某平台上联系了其他的中介看房，看看其他中介手头的房源，多看看。中介真的都很热情，给你打电话，开车带着你到处看房。<br>不同的中介讲解的还不一样（一个中介说另一个中介之前带看过的地方以前是坟场😂）<br>ps:新房开发商和中介之间是有利益交易的，开发商会给中介佣金。<br>一开始我以为买房购房者需要给中介钱，毕竟中介带我们满城市跑，后来才知道中介不收购房者钱，买房成交后开发商会给中介佣金。</p><h3 id="确认"><a href="#确认" class="headerlink" title="确认"></a>确认</h3><p>加推：新房开发商大部分都不是一起开卖的，都是一栋一栋卖，防止低复不好卖，后面开新盘的就叫加推，加推时间会不确认，要等。</p><p>经过几周的看房，其实一个城市新房也就那么多，一天看几个几天就能看完，有个大概印象就可以选择购买了。<br>房价都是一房一价，如下图，一般高层除了顶楼 价格会逐层增加一点，可能越高空气越好？<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/yifangyijia.jpg" alt="房价" title="房价"></p><p>我最终选择了一个价格不高的，离菜市场比较近，可能有点噪音，明年6月交房，离地铁大概六百米，不过开通还要几年。这个开发商的上一次开盘基本收尾了，等他家的加推新盘。<br>学区可以在教体局查到,下图是一张包河区的学区图<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/xuequ.jpg" alt="学区" title="学区"></p><h3 id="登记："><a href="#登记：" class="headerlink" title="登记："></a>登记：</h3><p>刚需：合肥市新政，市区无房，有两年社保，未满35岁为刚需购房者，新房开售时有30%的套数为刚需，刚需拥有优选选房和最低30%首付</p><p>9月4日，购房要准备材料1.身份证 2.户口本 3.结婚证(没结婚不需要) 3.征信报告 4.社保明细，置业顾问给一个开发商的网址，填写信息登记还会公示，准备摇号</p><h3 id="摇号"><a href="#摇号" class="headerlink" title="摇号"></a>摇号</h3><p>那天售楼部热火朝天人山人海，每个登记购房者进去会贴一个编号贴，摇号就和彩票摇号一样，一个大转盘，转出哪个数字，对应数字的购房者就进去选楼层与房间号。</p>  <div id="dplayer5" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer5"),"video":{"url":"https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/yaohao3.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><p>之后当场签订认购书包括单身证明，无房证明等并缴纳2w定金。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/rengoushu.jpg" alt="认购书" title="认购书"></p><h3 id="签合同"><a href="#签合同" class="headerlink" title="签合同"></a>签合同</h3><p>房查：置业顾问拿户口本原件房查，确认家庭是否是首套房<br>9月15日，之后置业顾问会和你确认贷款是商贷还是公积金贷，首付比例，并缴纳首付款<br>10月16日，房查通过，签订正式购房合同<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/hetong.jpg" alt="合同" title="合同"></p><p>此时房管局已经能查到自己的网备单了<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/beian.jpg" alt="备案" title="备案"></p><h3 id="贷款"><a href="#贷款" class="headerlink" title="贷款"></a>贷款</h3><p>组合贷需要材料：1.商品房买卖合同 2.收据，POS单 3.收入证明 3.结婚证 4.户口本 5.缴纳贷款的银行卡 6.身份证 7.单身离异需要离婚证<br>贷款可以自己提前算个大概<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/daikuan.png" alt="贷款" title="贷款"><br>10月26日，去银行贷款，提前几天在微信小程序上预约贷款，银行是置业顾问指定的。去了之后先要办银行卡，以后每月还贷款从这张银行卡扣。之后填了一堆材料，签了好多名字，感觉把自己卖了。<br>ps:合同不能涂改，我写错了一个数字多描了一笔，小姐姐直接把一本仍了，说合同怎么能涂改呢<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/maifang/daikuanshenqing.jpg" alt="申请表" title="申请表"></p><p>组合贷的话会下来比较慢，工作人员说可能要半年才能下来</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="买房" scheme="https://zcccool.cn/tags/%E4%B9%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>乌镇&amp;杭州</title>
    <link href="https://zcccool.cn/2021/05/07/%E4%B9%8C%E9%95%87-%E6%9D%AD%E5%B7%9E/"/>
    <id>https://zcccool.cn/2021/05/07/%E4%B9%8C%E9%95%87-%E6%9D%AD%E5%B7%9E/</id>
    <published>2021-05-07T15:53:49.000Z</published>
    <updated>2021-05-09T06:42:16.717Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_014.jpg" title="乌镇"></p><h3 id="假期"><a href="#假期" class="headerlink" title="假期"></a>假期</h3><p>有些人一年只能见一次面，但是见到了没有一丝拘束,仿佛分别就在昨天，又仿佛我们从未分别<br>今年五一又来到了美丽的城市杭州，和一年没见的好友谈天说地，嬉戏玩耍，无拘无束，开开心心</p><h3 id="May-1st皋亭山"><a href="#May-1st皋亭山" class="headerlink" title="May 1st皋亭山"></a>May 1st皋亭山</h3><p>合肥-杭州的高铁用时两个半小时，到处排队拥挤的人流是火热假期的前奏。<br>成功抵达，吃过饭开始商量去哪玩。因为好久没爬山了，第一站便选择了去爬皋亭山<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/gts_002.jpg" alt="皋亭山" title="皋亭山"><br>皋亭山位于杭州城东北部，东西9公里，南北2.5公里。自西往东依次为：半山、黄鹤山、元宝山、皋亭山、桐扣山、佛日山等，其中皋亭山为最高峰，海拔361.1米，诸峰统称为皋亭山。<br>看微博西湖断桥被围得水泄不通，而这秀丽的山上人员稀少，格外清净。看来以后假期还是要尽可能的避开热门景点。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/gts_003.jpg" title="皋亭山"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/gts_004.jpg" title="皋亭山"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/gts_005.jpg" title="皋亭山"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/gts_006.jpg" title="皋亭山"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/gts_007.jpg" title="皋亭山"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/gts_008.jpg" title="皋亭山"><br>爬完山出完汗已是天黑，我们刚好去接第三位因为白天上班只能下午赶来的小伙伴。至此此次五一小分队人员集合完毕。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/gts_009.jpg" alt="帝王蟹" title="皋亭山"><br>吃饭的时候发现了售价1499元一只的帝王蟹！</p><h3 id="May-2st乌镇"><a href="#May-2st乌镇" class="headerlink" title="May 2st乌镇"></a>May 2st乌镇</h3><p>第二天 坐上8：20出发的杭州东-乌镇的汽车，用时一个半小时到达我们的此次游玩的重点目的地–乌镇。<br>乌镇位于浙江省嘉兴市桐乡市，是个河流交错的水乡小镇，景区分为东栅-西栅两部分，因为西栅适合晚上游玩，我们先从东栅开始游玩。<br>人是真的多啊<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_099.jpg" alt="人山人海" title="乌镇"></p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_000.jpg" alt="流水人家" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_017.jpg" alt="流水人家" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_010.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_001.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_002.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_003.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_013.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_011.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_004.jpg" alt="木心美术馆" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_006.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_007.jpg" alt="酒坛" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_008.jpg" alt="酒作坊" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_009.jpg" alt="蓝印花布" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_015.jpg" alt="蓝印花布" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_012.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_019.jpg" title="乌镇"><br>夜晚的西栅</p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_020.jpg" alt="夜景" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_026.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_021.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_022.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_023.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_024.jpg" title="乌镇"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/wz_025.jpg" alt="合影" title="乌镇"><br>乌镇的特产有白水鱼（很像鲈鱼但是刺多），三白酒（55°的白酒），姑嫂饼（迷你桃酥），杭白菊（迷你菊花茶）<br>ps:西栅的游船要排很长的队，买票要排队，坐船还要排队，从开始买票到坐船差不多要排一个小时。每船限坐8个人，船行全程大概半个小时。</p><h3 id="May-3st杭州八卦田"><a href="#May-3st杭州八卦田" class="headerlink" title="May 3st杭州八卦田"></a>May 3st杭州八卦田</h3><p>上午睡个好觉后坐车回到了杭州，商量下一步的计划。在ins上看到八卦田的图片，决定去一下<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_000.jpg" alt="八卦田" title="八卦田"><br>可惜我们去的太晚了，到的时候已经快6点，能一睹八卦田全貌的玉皇山关门了，只能在里面转转<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_001.jpg" title="八卦田"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_002.jpg" title="八卦田"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_004.jpg" title="八卦田"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_005.jpg" title="八卦田"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_006.jpg" title="八卦田"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_007.jpg" title="八卦田"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_008.jpg" title="八卦田"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/bgt_009.jpg" title="八卦田"></p><h3 id="May-4th-云栖竹径"><a href="#May-4th-云栖竹径" class="headerlink" title="May 4th 云栖竹径"></a>May 4th 云栖竹径</h3><p>夜里下了一夜的大雨，下午雨停了该出门了，又是爬山的一天。<br>云栖竹径真是太漂亮了<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_001.jpg" alt="云栖竹径" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_012.jpg" alt="云栖竹径" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_011.jpg" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_002.jpg" alt="铁索桥" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_003.jpg" alt="茶园" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_004.jpg" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_005.jpg" alt="茶园" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_006.jpg" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_007.jpg" alt="群山" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_008.jpg" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_009.jpg" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_0091.jpg" title="云栖竹径"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/wuzhen/yxzj_010.jpg" title="云栖竹径"></p><h3 id="May-5th"><a href="#May-5th" class="headerlink" title="May 5th"></a>May 5th</h3><p>天气晴朗，回家<br>此次行程粗略费用：合肥-杭州高铁单程≈180￥，杭州-乌镇单程≈35￥，东西栅联票=190￥，西栅船票=60￥，乌镇住宿≈500￥，随便吃一顿≈30￥，吃点好的人均≈100￥，云栖竹径门票=8￥</p><h3 id="End"><a href="#End" class="headerlink" title="End"></a>End</h3><p>五一假期圆满结束，最后想说：愿你出走半生，归来仍是少年</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="旅行" scheme="https://zcccool.cn/tags/%E6%97%85%E8%A1%8C/"/>
    
    <category term="乌镇" scheme="https://zcccool.cn/tags/%E4%B9%8C%E9%95%87/"/>
    
  </entry>
  
  <entry>
    <title>Android搭建局域网服务器</title>
    <link href="https://zcccool.cn/2020/06/30/Android%E6%90%AD%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>https://zcccool.cn/2020/06/30/Android%E6%90%AD%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/</id>
    <published>2020-06-30T14:14:28.000Z</published>
    <updated>2021-11-12T04:47:56.973Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_07.jpg" title="Image"></p><h3 id="AndroidAsync"><a href="#AndroidAsync" class="headerlink" title="AndroidAsync"></a>AndroidAsync</h3><p>使用AndroidAsync:  <a href="https://github.com/koush/AndroidAsync">AndroidAsync</a><br>引入AndroidAsync<br>    implementation ‘com.koushikdutta.async:androidasync:2.2.1’</p><p>###主要方法</p><h4 id="开启服务"><a href="#开启服务" class="headerlink" title="开启服务"></a>开启服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">private AsyncHttpServer server = new AsyncHttpServer();</span><br><span class="line">public void startServer() &#123;</span><br><span class="line"> //主页</span><br><span class="line">     server.get(&quot;/&quot;, new HttpServerRequestCallback() &#123;</span><br><span class="line">         @Override</span><br><span class="line">         public void onRequest(AsyncHttpServerRequest request, AsyncHttpServerResponse response) &#123;</span><br><span class="line">             //需要新建目录,存放文件</span><br><span class="line">             String filePath = Environment.getExternalStorageDirectory() + &quot;/my_android_server/&quot;;</span><br><span class="line">             String html = String.format(sendHtml, getFiles(filePath));</span><br><span class="line">             Log.d(TAG, html);</span><br><span class="line">             response.send(html);</span><br><span class="line"></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">     //下载文件</span><br><span class="line">         server.get(&quot;/file&quot;, new HttpServerRequestCallback() &#123;</span><br><span class="line">         @Override</span><br><span class="line">         public void onRequest(AsyncHttpServerRequest request, AsyncHttpServerResponse response) &#123;</span><br><span class="line">             String name = request.getQuery().getString(&quot;name&quot;);</span><br><span class="line">             String filePath = Environment.getExternalStorageDirectory() + &quot;/my_android_server/&quot; + name;</span><br><span class="line">             File file = new File(filePath);</span><br><span class="line">             if (file.exists()) &#123;</span><br><span class="line">                 response.sendFile(file);</span><br><span class="line">             &#125; else &#123;</span><br><span class="line">                 Log.d(TAG, &quot;file path = &quot; + file.getAbsolutePath() + &quot;not exist&quot;);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br><span class="line"> &#125;</span><br><span class="line">  server.listen(PORT_LISTEN_DEFALT);//设置端口号</span><br></pre></td></tr></table></figure><h4 id="获取IP"><a href="#获取IP" class="headerlink" title="获取IP"></a>获取IP</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public static String getHostIp() &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        Enumeration&lt;NetworkInterface&gt; allNetInterfaces = NetworkInterface.getNetworkInterfaces();</span><br><span class="line">        while (allNetInterfaces.hasMoreElements()) &#123;</span><br><span class="line">            NetworkInterface netInterface = allNetInterfaces.nextElement();</span><br><span class="line">            Enumeration&lt;InetAddress&gt; addresses = netInterface.getInetAddresses();</span><br><span class="line">            while (addresses.hasMoreElements()) &#123;</span><br><span class="line">                InetAddress ip = addresses.nextElement();</span><br><span class="line">                if (ip instanceof Inet4Address</span><br><span class="line">                        &amp;&amp; !ip.isLoopbackAddress()</span><br><span class="line">                        &amp;&amp; !ip.getHostAddress().contains(&quot;:&quot;)) &#123;</span><br><span class="line">                    return ip.getHostAddress();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="定义返回网页html"><a href="#定义返回网页html" class="headerlink" title="定义返回网页html"></a>定义返回网页html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">    private String sendHtml = &quot;&lt;!DOCTYPE html&gt;\n&quot; +</span><br><span class="line">            &quot;&lt;html&gt;\n&quot; +</span><br><span class="line">            &quot;&lt;head lang=\&quot;en\&quot;&gt;\n&quot; +</span><br><span class="line">            &quot;    &lt;meta charset=\&quot;UTF-8\&quot;&gt;\n&quot; +</span><br><span class="line">            &quot;    &lt;title&gt;main&lt;/title&gt;\n&quot; +</span><br><span class="line">            &quot;    &lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=UTF-8\&quot;&gt;\n&quot; +</span><br><span class="line">            &quot;    &lt;meta http-equiv=\&quot;X-UA-Compatible\&quot; content=\&quot;IE=edge\&quot;&gt;\n&quot; +</span><br><span class="line">            &quot;&lt;body&gt;\n&quot; +</span><br><span class="line">            &quot;%s&lt;/body&gt;\n&quot; +</span><br><span class="line">            &quot;&lt;/html&gt;&quot;;</span><br><span class="line"></span><br><span class="line">  String getFiles(String path) &#123;</span><br><span class="line">        StringBuilder files = new StringBuilder();</span><br><span class="line">        File file = new File(path);</span><br><span class="line">        File[] tempList = file.listFiles();</span><br><span class="line">        if (null == tempList || tempList.length == 0) &#123;</span><br><span class="line">            Log.d(TAG, &quot;文件夹不存在或者文件夹内无文件&quot;);</span><br><span class="line">            return &quot;请在根目录新建my_android_server并放入文件&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        for (File value : tempList) &#123;</span><br><span class="line">            if (value.isFile()) &#123;</span><br><span class="line">                Log.d(TAG, value.getName());</span><br><span class="line">                String fileName = value.getName();</span><br><span class="line">                String fileURL = &quot;&lt;a href=\&quot;http://%s:5000/file?name=%s\&quot;&gt;%s&lt;/a&gt;&lt;br/&gt;\n&quot;;</span><br><span class="line">                String ss = String.format(fileURL, getHostIp(), fileName, fileName);</span><br><span class="line">                files.append(ss);</span><br><span class="line">            &#125;</span><br><span class="line">//            if (value.isDirectory()) &#123;</span><br><span class="line">            //这里就不递归了，</span><br><span class="line">//            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return files.toString();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>在根目录新建my_android_server文件夹,在里面放入文件<br>局域网内打开“<a href="http://IP:端口号”即可打开网页,网页会显示文件夹内文件,点击文件即可下载">http://IP:端口号”即可打开网页,网页会显示文件夹内文件,点击文件即可下载</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="Android" scheme="https://zcccool.cn/tags/Android/"/>
    
    <category term="服务器" scheme="https://zcccool.cn/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>DeepFaceLab AI换脸</title>
    <link href="https://zcccool.cn/2020/04/12/DeepFaceLab-AI%E6%8D%A2%E8%84%B8/"/>
    <id>https://zcccool.cn/2020/04/12/DeepFaceLab-AI%E6%8D%A2%E8%84%B8/</id>
    <published>2020-04-12T15:26:02.000Z</published>
    <updated>2021-05-25T16:54:08.348Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/deepfacelab/deepfacelab_01.jpg" title="Image"></p><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><p>看到网上一个换脸宋小宝的视频觉得挺有意思而且换脸的效果相当真实，很早之前就耳闻换脸了，特地来研究一下</p><h3 id="DeepFaceLab"><a href="#DeepFaceLab" class="headerlink" title="DeepFaceLab"></a>DeepFaceLab</h3><p>换脸的软件有好几种，听介绍说DeepFaceLab这个软件使用简单且效果不错，就来学习一下这个软件的使用</p><p><a href="https://github.com/iperov/DeepFaceLab">DeepFaceLab传送门</a></p><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>软件教程<a href="https://www.deepfaker.xyz/">DeepFaceLab中文网</a>这个网站有介绍</p><p>软件解压后安装下图的顺序依次点击就可以<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/deepfacelab/deepfacelab_02.jpg" alt="DeepFaceLab" title="use"></p><p>第6步是训练操作，是最耗时的操作，这一步会跳出预览窗口可以看到图中的黄蓝线（迭代曲线）、迭代数（Iter）。</p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/deepfacelab/deepfacelab_03.jpg" alt="第6步" title="use"></p><p>这一步可以根据动态参数的最后两列Loss值（值越小越好，建议低于0.2）、黄色线所占的比例、最后一列的人脸清晰度来停止训练。<br>这一步可以保存，再次打开会继续上次的参数训练<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/deepfacelab/deepfacelab_04.png" alt="第7步" title="use"></p><p>第7步是合并操作，根据弹出的操作提示可以操作调整合成的效果<br>按x切换遮罩模式，<br>按WS调整人脸的遮罩范围，<br>按ED调整脸的边缘羽化，<br>按TG调整人脸的清晰度分辨率，<br>按/讲当前一张调整的参数覆盖到下一张的参数</p><p>合成效果<br> <div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"video":{"url":"https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/deepfacelab/deepfacelab_meidui.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="DeepFaceLab" scheme="https://zcccool.cn/tags/DeepFaceLab/"/>
    
  </entry>
  
  <entry>
    <title>python爬取网易云音乐榜单</title>
    <link href="https://zcccool.cn/2020/03/15/python%E7%88%AC%E5%8F%96%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A6%9C%E5%8D%95/"/>
    <id>https://zcccool.cn/2020/03/15/python%E7%88%AC%E5%8F%96%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A6%9C%E5%8D%95/</id>
    <published>2020-03-14T18:04:57.000Z</published>
    <updated>2020-03-18T16:43:46.256Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_06.jpg" title="Image"></p><h3 id="1-开始"><a href="#1-开始" class="headerlink" title="1.开始"></a>1.开始</h3><p>一上来模仿爬取豆瓣的排行榜使用beautifulSoup库抓取，发现无法抓取到。分析网页代码发现音乐榜单的是iframe的嵌套<br>需要使用selenium库</p><h3 id="2-selenium"><a href="#2-selenium" class="headerlink" title="2.selenium"></a>2.selenium</h3><p><a href="https://selenium-python.readthedocs.io/" title="selenium">selenium官网</a></p><p>需要根据自己浏览器的版本下载对应的驱动包，讲驱动包放在python.exe同一个文件夹，我的放在Anaconda3文件夹下</p><p>ps:谷歌浏览器在地址栏输入chrome://version/ 即可查看版本</p><h3 id="3-分析网页语言结构"><a href="#3-分析网页语言结构" class="headerlink" title="3.分析网页语言结构"></a>3.分析网页语言结构</h3><p>分析排行榜内容对应的html语言标签、属性</p><h3 id="4-主要代码"><a href="#4-主要代码" class="headerlink" title="4.主要代码"></a>4.主要代码</h3><p>将数据保存进Excel表格</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">        &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.80 Safari/537.36&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    driver = webdriver.Chrome()  </span><br><span class="line">    # https://selenium-python.readthedocs.io/installation.html</span><br><span class="line">    driver.get(DOWNLOAD_URL)</span><br><span class="line">    driver.switch_to.frame(&quot;g_iframe&quot;)</span><br><span class="line">    li_list = driver.find_elements_by_xpath(&quot;//tbody/tr&quot;)</span><br><span class="line">    content_list = []</span><br><span class="line">    for li in li_list:</span><br><span class="line">        item = &#123;&#125;</span><br><span class="line">        # item[&quot;cover&quot;] = li.find_element_by_xpath(&quot;.//img[@class=&#x27;rpic&#x27;]&quot;).get_attribute(&quot;src&quot;)#只有前三首有封面</span><br><span class="line">        item[&quot;num&quot;] = li.find_element_by_xpath(&quot;.//span[@class=&#x27;num&#x27;]&quot;).text</span><br><span class="line">        item[&quot;songer&quot;] = li.find_element_by_xpath(&quot;.//div[@class=&#x27;text&#x27;]&quot;).get_attribute(&quot;title&quot;)</span><br><span class="line">        item[&quot;song&quot;] = li.find_element_by_xpath(&quot;.//b&quot;).get_attribute(&quot;title&quot;)</span><br><span class="line">        item[&quot;song_time&quot;] = li.find_element_by_xpath(&quot;.//span[@class=&#x27;u-dur &#x27;]&quot;).text</span><br><span class="line">        print(item)</span><br><span class="line">        content_list.append(item)</span><br><span class="line">    ws1[&#x27;A1&#x27;] = &quot;排名&quot;</span><br><span class="line">    ws1[&#x27;B1&#x27;] = &quot;歌手&quot;</span><br><span class="line">    ws1[&#x27;C1&#x27;] = &quot;歌名&quot;</span><br><span class="line">    ws1[&#x27;D1&#x27;] = &quot;歌曲时间&quot;</span><br><span class="line">    for index, it in enumerate(content_list):</span><br><span class="line">        col_a = &#x27;A%s&#x27; % (index + 2)</span><br><span class="line">        col_b = &#x27;B%s&#x27; % (index + 2)</span><br><span class="line">        col_c = &#x27;C%s&#x27; % (index + 2)</span><br><span class="line">        col_d = &#x27;D%s&#x27; % (index + 2)</span><br><span class="line">        ws1[col_a] = str(it[&#x27;num&#x27;])</span><br><span class="line">        ws1[col_b] = str(it[&#x27;songer&#x27;])</span><br><span class="line">        ws1[col_c] = str(it[&#x27;song&#x27;])</span><br><span class="line">        ws1[col_d] = str(it[&#x27;song_time&#x27;])</span><br><span class="line">    ws1.column_dimensions[&#x27;B&#x27;].width = 60.0  # 调整列宽</span><br><span class="line">    ws1.column_dimensions[&#x27;C&#x27;].width = 90.0</span><br><span class="line">    wb.save(filename=dest_filename)</span><br><span class="line">    driver.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://github.com/zccguagua/python_demo/blob/master/pachong/wangyimusic.py">代码链接</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="python" scheme="https://zcccool.cn/tags/python/"/>
    
    <category term="爬虫" scheme="https://zcccool.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Android手机刷机记录</title>
    <link href="https://zcccool.cn/2020/02/28/Android%E6%89%8B%E6%9C%BA%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95/"/>
    <id>https://zcccool.cn/2020/02/28/Android%E6%89%8B%E6%9C%BA%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95/</id>
    <published>2020-02-27T16:59:57.000Z</published>
    <updated>2020-04-25T04:29:07.695Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_05.jpg" title="Image"></p><h3 id="1-开始"><a href="#1-开始" class="headerlink" title="1.开始"></a>1.开始</h3><p>突发奇想给尝试自己的老Android手机刷系统，记录一下刷机过程</p><h4 id="2-解锁Bootloader-BL解锁"><a href="#2-解锁Bootloader-BL解锁" class="headerlink" title="2.解锁Bootloader(BL解锁)"></a>2.解锁Bootloader(BL解锁)</h4><p>一开始上来什么也不懂就开始进入fastboot发现老是不成功<br>才发现手机是先要解锁的，目前华为已经取消官网解锁了，自己尝试了很多解锁方法始终不行<br>进入刷机机器人界面显示绿色”PHONE Locked”就是未解锁<br>Bootloader，通俗来讲就是锁住你手机的Recovery和Fastboot,来阻止第三方ROM对手机进行损失<br>以下是几条命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fastboot devices ## 查看是否连接</span><br><span class="line">fastboot flash recovery recovery.img ## 刷入recovery</span><br><span class="line">fastboot flash system system.img</span><br><span class="line">执行 adb reboot bootloader ## 进入 Bootloader 界面</span><br><span class="line">fastboot flash boot .img</span><br><span class="line">fastboot reboot ## 重启手机</span><br></pre></td></tr></table></figure><p>未解锁就刷系统会提示”Command not allowed”</p><p>尝试多种方法无效后 还是找了淘宝解锁（据卖家说能解锁任何Android手机）。。。。。。</p><p>显示红字”PHONE UnLocked”标识解锁成功<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/shuaji1.png" alt="UnLocked" title="UnLocked"></p><h3 id="3-刷机"><a href="#3-刷机" class="headerlink" title="3.刷机"></a>3.刷机</h3><p>解锁之后简单的方法使用”线刷宝”一键刷机即可,会提示刷机成功</p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/shuji3.png" alt="Success" title="Success"></p><h3 id="4-刷入第三方的-Recovery-TWRP"><a href="#4-刷入第三方的-Recovery-TWRP" class="headerlink" title="4.刷入第三方的 Recovery TWRP"></a>4.刷入第三方的 Recovery TWRP</h3><p>有TWRP方便后面安装刷入Magisk</p><p>Recovery 是安卓的恢复系统</p><p>TWRP 是一个著名的开源 Recovery 镜像</p><p>TWRP官网下载地址： <a href="https://twrp.me/" title="TWRP">TWRP</a></p><p>我采用花粉俱乐部的方法，比较简单  <a href="https://club.huawei.com/thread-8620377-1-1-2520.html" title="TWRP">荣耀7 中文TWRP</a></p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/shuji2.png" alt="界面" title="TWRP"></p><h3 id="5-刷入Magisk"><a href="#5-刷入Magisk" class="headerlink" title="5.刷入Magisk"></a>5.刷入Magisk</h3><p>方法参考     <a href="https://www.52pojie.cn/thread-903485-1-3.html?proxy=1" title="52pojie">线刷第三方Recovery+卡刷面具Magisk</a></p><p>Magisk参考阅读：<a href="https://sspai.com/post/53043" title="TWRP">少数派 - 每个 Android 玩家都不可错过的神器</a> </p><h3 id="6-安装太极Tichi"><a href="#6-安装太极Tichi" class="headerlink" title="6.安装太极Tichi"></a>6.安装太极Tichi</h3><p>在Magisk查找插件太极taichi</p><p>通过Magisk安装太极-阳模块（太极-阳比太极阴功能丰富）</p><h3 id="7-畅玩微信"><a href="#7-畅玩微信" class="headerlink" title="7.畅玩微信"></a>7.畅玩微信</h3><p>在太极里安装畅玩微信模块（中间需要重启微信）<br>这个模块功能丰富，可对微信做很多操作，运动步数，自动抢红包，修改骰子，自动回复（这个功能没试成功）等等等等，功能太多，其他功能仍在测试</p><p>刷机后真是发现新天地</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="刷机" scheme="https://zcccool.cn/tags/%E5%88%B7%E6%9C%BA/"/>
    
    <category term="Android" scheme="https://zcccool.cn/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>推流服务器与Android直播实现</title>
    <link href="https://zcccool.cn/2020/01/06/%E6%8E%A8%E6%B5%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8EAndroid%E7%9B%B4%E6%92%AD%E5%AE%9E%E7%8E%B0/"/>
    <id>https://zcccool.cn/2020/01/06/%E6%8E%A8%E6%B5%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8EAndroid%E7%9B%B4%E6%92%AD%E5%AE%9E%E7%8E%B0/</id>
    <published>2020-01-06T15:10:31.000Z</published>
    <updated>2021-05-25T16:50:37.798Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_04.jpg" title="Image"></p><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>安卓端实现视频直播/观看，尝试自己搭建一个推流服务器，为了简单方便采用SRS(Simple RTMP Server)开源流媒体服务器</p><p>系统我使用的是centOS6.5，下载安装虚拟机和centOS可参考其他文章</p><p>SRS文档：<a href="https://github.com/ossrs/srs/wiki/v1_CN_Build">SRS</a></p><h3 id="安装使用"><a href="#安装使用" class="headerlink" title="安装使用"></a>安装使用</h3><p>首先clone srs源码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/ossrs/srs</span><br><span class="line">cd srs/trunk</span><br></pre></td></tr></table></figure><p>编译和启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure &amp;&amp; make</span><br><span class="line">指定配置文件，即可启动SRS：</span><br><span class="line">./objs/srs -c conf/srs.conf</span><br></pre></td></tr></table></figure><p>至此，推流服务器已经搭建完成，超级简单啊</p><h3 id="测试推流拉流"><a href="#测试推流拉流" class="headerlink" title="测试推流拉流"></a>测试推流拉流</h3><p>可用obs采集摄像头推流 <a href="https://obsproject.com/">OBS下载</a></p><p>使用方法可参考这篇博客：<a href="https://www.cnblogs.com/yjmyzz/p/srs_study_1_install_push_and_pull_stream.html">开源流媒体服务器SRS学习笔记</a></p><p>不同端拉流可以用VLC开源播放器 <a href="https://www.videolan.org/">VLC官网</a></p><p>输入推流地址即可查看到推流视频 “rtmp://your_server_ip:1935/live/livestream”</p><h3 id="Android端截屏推流"><a href="#Android端截屏推流" class="headerlink" title="Android端截屏推流"></a>Android端截屏推流</h3><p>安卓端屏幕推流可参考这篇博客：<a href="https://blog.csdn.net/zxccxzzxz/article/details/55230272">Android实现录屏直播 </a></p><p>GitHub地址：<a href="https://github.com/eterrao/ScreenRecorder">传送门</a></p><p>效果图:</p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/rtmp.jpg" alt="rtmp"></p><p>PS:局域网内使用会有卡顿和延迟</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="Android" scheme="https://zcccool.cn/tags/Android/"/>
    
    <category term="SRS" scheme="https://zcccool.cn/tags/SRS/"/>
    
  </entry>
  
  <entry>
    <title>Itchat自动回复与数据库保存</title>
    <link href="https://zcccool.cn/2019/11/05/Itchat%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%9D%E5%AD%98/"/>
    <id>https://zcccool.cn/2019/11/05/Itchat%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%9D%E5%AD%98/</id>
    <published>2019-11-05T07:31:05.000Z</published>
    <updated>2020-03-18T16:43:46.397Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_03.jpg" title="Image"></p><h3 id="使用ItChat库微信消息自动回复-pymysql保存数据库"><a href="#使用ItChat库微信消息自动回复-pymysql保存数据库" class="headerlink" title="使用ItChat库微信消息自动回复/pymysql保存数据库"></a>使用ItChat库微信消息自动回复/pymysql保存数据库</h3><h4 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h4><p>注意登录网页微信只有老用户可以，新申请的微信号无法登录会出现以下提示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;error&gt;&lt;ret&gt;1203&lt;/ret&gt;&lt;message&gt;为了你的帐号安全，此微信号已不允许登录网页微信。</span><br><span class="line">你可以使用Windows微信或Mac微信在电脑端登录。Windows微信下载地址：https://pc.weixin.qq.com </span><br><span class="line"> Mac微信下载地址：https://mac.weixin.qq.com&lt;/message&gt;&lt;/error&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="全局数据："><a href="#全局数据：" class="headerlink" title="全局数据："></a>全局数据：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 自己id，用于判断是否是自己发送的消息</span><br><span class="line">my_UserName = &quot;my_UserName&quot;</span><br><span class="line"># 关键词恢复字典</span><br><span class="line">message_dict = &#123;</span><br><span class="line">    &quot;你最帅&quot;: &quot;回复消息1&quot;,</span><br><span class="line">    &quot;祝福&quot;: &quot;回复消息2&quot;,</span><br><span class="line">    &quot;佩奇&quot;: &quot;回复消息3&quot;,</span><br><span class="line">&#125;</span><br><span class="line"># 记录消息数，用于首次回复，第二次不再回复</span><br><span class="line">message_record = &#123;</span><br><span class="line">    &quot;userName&quot;: 1</span><br><span class="line">&#125;</span><br><span class="line"># 需要回复消息的微信群名称</span><br><span class="line">reply_group = &#123;1: &quot;消息测试&quot;, 2: &quot;疯狂找媳妇儿&quot;, 3: &quot;不准时下班小组&quot;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="登录查找好友保存数据库"><a href="#登录查找好友保存数据库" class="headerlink" title="登录查找好友保存数据库"></a>登录查找好友保存数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">def after_login():</span><br><span class="line">    print(&quot;您已登录&quot;)</span><br><span class="line">    # 连接数据库</span><br><span class="line">    db = pymysql.connect(host=&#x27;localhost&#x27;,</span><br><span class="line">                         user=&#x27;root&#x27;,</span><br><span class="line">                         password=&#x27;lonbon&#x27;,</span><br><span class="line">                         db=&#x27;wechat&#x27;,</span><br><span class="line">                         charset=&#x27;utf8mb4&#x27;,</span><br><span class="line">                         cursorclass=pymysql.cursors.DictCursor)</span><br><span class="line">    cursor = db.cursor()  # 使用cursor()方法获取操作游标</span><br><span class="line">    friends = itchat.get_friends(update=True)[0:]  # 获取好友信息</span><br><span class="line">    print(&quot;好友:&quot; + str(friends))</span><br><span class="line">    for friend in friends:</span><br><span class="line">        #判断好友是否已经存在在数据库</span><br><span class="line">        sql_select = &quot;SELECT nickname,remarkname FROM contacts WHERE nickname =%s&quot;</span><br><span class="line">        try:</span><br><span class="line">            cursor.execute(sql_select, (friend[&#x27;NickName&#x27;]))  # 查询好友昵称在数据库是否存在</span><br><span class="line">            result = cursor.fetchall()</span><br><span class="line">            db.commit()</span><br><span class="line">            if (len(result) &gt; 0):</span><br><span class="line">                sql = &quot;UPDATE contacts SET username =%s,time=%s  WHERE nickname = %s&quot;</span><br><span class="line">                try:</span><br><span class="line">                    cursor.execute(sql, (friend[&#x27;UserName&#x27;], time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()),</span><br><span class="line">                                         friend[&#x27;NickName&#x27;]))  # 更新好友id</span><br><span class="line">                    db.commit()  # 提交到数据库执行</span><br><span class="line">                except Exception as e:</span><br><span class="line">                    # db.rollback()# 发生错误时回滚</span><br><span class="line">                    print(&quot;sql_select_Error&quot;, e)</span><br><span class="line">            else:</span><br><span class="line">                sql_insert = &quot;&quot;&quot;INSERT INTO contacts (nickname,username, remarkname</span><br><span class="line">                   , signature, province,city,membercount,sex</span><br><span class="line">                   ,attrstatus,snsflag,contactflag,headimgurl,time) VALUES (&#x27;%s&#x27;,&#x27;%s&#x27;</span><br><span class="line">                   ,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;)&quot;&quot;&quot; % (</span><br><span class="line">                    str(friend[&#x27;NickName&#x27;]), str(friend[&#x27;UserName&#x27;]), str(friend[&#x27;RemarkName&#x27;])</span><br><span class="line">                    , str(friend[&#x27;Signature&#x27;]), str(friend[&#x27;Province&#x27;]), str(friend[&#x27;City&#x27;]), str(friend[&#x27;MemberCount&#x27;])</span><br><span class="line">                    , str(friend[&#x27;Sex&#x27;]), str(friend[&#x27;AttrStatus&#x27;]), str(friend[&#x27;SnsFlag&#x27;]), str(friend[&#x27;ContactFlag&#x27;])</span><br><span class="line">                    , str(friend[&#x27;HeadImgUrl&#x27;]), time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()))</span><br><span class="line"></span><br><span class="line">                cursor.execute(sql_insert)</span><br><span class="line">                db.commit()</span><br><span class="line"></span><br><span class="line">        except Exception as e:</span><br><span class="line">            # db.rollback() # 发生错误时回滚</span><br><span class="line">            print(&quot;sql_insert_Error&quot;, e)</span><br><span class="line">        # finally:</span><br><span class="line">        # 关闭数据库连接</span><br><span class="line">        # cursor.close()</span><br><span class="line">        # db.close()</span><br><span class="line"></span><br><span class="line">    # 获得完整的群聊列表</span><br><span class="line">    groups = itchat.get_chatrooms()</span><br><span class="line">    print(&quot;获得完整的群聊列表:&quot; + str(groups))</span><br><span class="line">    for item in groups:</span><br><span class="line">        sql_select_group = &quot;SELECT nickname,remarkname FROM groups WHERE nickname =%s&quot;</span><br><span class="line">        try:</span><br><span class="line">            cursor.execute(sql_select_group, (item[&#x27;NickName&#x27;]))  # 查询群昵称在数据库是否存在</span><br><span class="line">            result = cursor.fetchall()</span><br><span class="line">            db.commit()</span><br><span class="line">            if (len(result) &gt; 0):</span><br><span class="line">                print(&quot;已存在群：&quot; + item[&#x27;NickName&#x27;])</span><br><span class="line">                sql_update_group = &quot;UPDATE groups SET username =%s,time=%s  WHERE nickname = %s&quot;  # 更新群的id</span><br><span class="line">                try:</span><br><span class="line">                    cursor.execute(sql_update_group, (</span><br><span class="line">                        item[&#x27;UserName&#x27;], time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()), item[&#x27;NickName&#x27;]))</span><br><span class="line">                    db.commit()</span><br><span class="line">                except Exception as e:</span><br><span class="line">                    # 发生错误时回滚</span><br><span class="line">                    # db.rollback()</span><br><span class="line">                    print(&quot;发生了错误&quot;)</span><br><span class="line">                    print(&quot;Error&quot;, e)</span><br><span class="line">            else:</span><br><span class="line">                sql_insert_group = &quot;&quot;&quot;INSERT INTO groups (nickname,username, remarkname</span><br><span class="line">                , signature, province,city,membercount,sex</span><br><span class="line">                ,attrstatus,snsflag,contactflag,headimgurl,time) VALUES (&#x27;%s&#x27;,&#x27;%s&#x27;</span><br><span class="line">                ,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;)&quot;&quot;&quot; % (</span><br><span class="line">                    str(item[&#x27;NickName&#x27;]), str(item[&#x27;UserName&#x27;]), str(item[&#x27;RemarkName&#x27;])</span><br><span class="line">                    , str(item[&#x27;Signature&#x27;]), str(item[&#x27;Province&#x27;]), str(item[&#x27;City&#x27;]), str(item[&#x27;MemberCount&#x27;])</span><br><span class="line">                    , str(item[&#x27;Sex&#x27;]), str(item[&#x27;AttrStatus&#x27;]), str(item[&#x27;SnsFlag&#x27;]), str(item[&#x27;ContactFlag&#x27;])</span><br><span class="line">                    , str(item[&#x27;HeadImgUrl&#x27;]), time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()))</span><br><span class="line"></span><br><span class="line">                cursor.execute(sql_insert_group)</span><br><span class="line">                db.commit()</span><br><span class="line"></span><br><span class="line">        except Exception as e:</span><br><span class="line">            # db.rollback() # 发生错误时回滚</span><br><span class="line">            print(&quot;sql_select_group_Error&quot;, e)</span><br><span class="line">        # finally:</span><br><span class="line">        # 关闭数据库连接</span><br><span class="line">    cursor.close()</span><br><span class="line">    db.close()</span><br></pre></td></tr></table></figure><h4 id="退出登录"><a href="#退出登录" class="headerlink" title="退出登录"></a>退出登录</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#退出登录</span><br><span class="line">def after_logout():</span><br><span class="line">    print(&quot;已退出&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="监听好友消息并回复"><a href="#监听好友消息并回复" class="headerlink" title="监听好友消息并回复"></a>监听好友消息并回复</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># @itchat.msg_register(itchat.content.MAP)  # 位置文本</span><br><span class="line"># @itchat.msg_register(itchat.content.NOTE)  # 通知文本</span><br><span class="line"># @itchat.msg_register(itchat.content.PICTURE)  # 监听图片/表情</span><br><span class="line"># @itchat.msg_register(itchat.content.FRIENDS)  # 好友邀请</span><br><span class="line"># @itchat.msg_register(itchat.content.VIDEO)  # 监听视频</span><br><span class="line">@itchat.msg_register(itchat.content.TEXT)  # 监听文本内容</span><br><span class="line">def print_content(msg):</span><br><span class="line">    print(&quot;msg是：&quot; + str(msg))</span><br><span class="line">    NickName = msg[&#x27;User&#x27;][&#x27;NickName&#x27;]  # 对方名字</span><br><span class="line">    FromUserName = msg[&#x27;FromUserName&#x27;]  # 发送人的id</span><br><span class="line">    user = itchat.search_friends(name=NickName)[0]  # 获取特定UserName的用户信息</span><br><span class="line">    text = msg[&#x27;Text&#x27;]  # 发送的文字消息</span><br><span class="line">    print(&quot;my_UserName:&quot; + my_UserName)</span><br><span class="line">    if FromUserName != my_UserName:</span><br><span class="line">        hasKey = False</span><br><span class="line">        theKey = &quot;&quot;</span><br><span class="line">        for key in message_dict.keys():</span><br><span class="line">            if (key in text):</span><br><span class="line">                hasKey = True</span><br><span class="line">                theKey = key</span><br><span class="line">        if (hasKey):</span><br><span class="line">            print(&quot;找到关键字:&quot; + str(theKey))</span><br><span class="line">            user.send(&quot;检测到关键字：&quot; + str(theKey))  # message_dict[theKey]</span><br><span class="line">            # user.send_image(&quot;./image/209717696.jpg&quot;)  # 发送图片</span><br><span class="line">            # user.send_file(&quot;cat.py&quot;)  # 发送文件</span><br><span class="line">            # user.send_file(&quot;cat.mp4&quot;)  # 发送视频</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;字典里没有关键字&quot;)</span><br><span class="line">            if (NickName in message_record.keys()):</span><br><span class="line">                print(&quot;已经发送过了&quot;)</span><br><span class="line">                message_record.update(&#123;str(NickName): 2&#125;)</span><br><span class="line">            else:</span><br><span class="line">                message_record.update(&#123;str(NickName): 1&#125;)</span><br><span class="line">                user.send(u&quot;亲爱的 %s,你好啊&quot; % NickName)</span><br><span class="line">                user.send_image(&quot;./image/2.jpg&quot;)</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;yourself&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="监听群消息并回复"><a href="#监听群消息并回复" class="headerlink" title="监听群消息并回复"></a>监听群消息并回复</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">@itchat.msg_register(itchat.content.TEXT, isGroupChat=True)</span><br><span class="line">def reply_msg(msg):</span><br><span class="line">    # print(&quot;收到一条群信息：&quot;, msg[&#x27;ActualNickName&#x27;], msg[&#x27;Content&#x27;])</span><br><span class="line">    print(&quot;收到一条群信息：&quot;, str(msg))</span><br><span class="line">    # chat_rooms = itchat.search_chatrooms(name=&#x27;消息测试&#x27;)</span><br><span class="line">    # if len(chat_rooms) &gt; 0:</span><br><span class="line">    #     itchat.send_msg(&#x27;测试：这是一条自动回复消息,您发的消息是：%s&#x27; % msg[&#x27;Content&#x27;], chat_rooms[0][&#x27;UserName&#x27;])</span><br><span class="line"></span><br><span class="line">    from_user = msg[&#x27;FromUserName&#x27;]  # 来自谁的消息（自己发的是自己的id,其他人发的是群id）</span><br><span class="line">    content = msg[&#x27;Content&#x27;]</span><br><span class="line">    print(content)</span><br><span class="line">    db_conn = pymysql.connect(host=&#x27;localhost&#x27;,</span><br><span class="line">                              user=&#x27;root&#x27;,</span><br><span class="line">                              password=&#x27;lonbon&#x27;,</span><br><span class="line">                              db=&#x27;wechat&#x27;,</span><br><span class="line">                              charset=&#x27;utf8mb4&#x27;,</span><br><span class="line">                              cursorclass=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    cursor = db_conn.cursor()</span><br><span class="line">    sql_select = &quot;SELECT nickname,remarkname FROM groups WHERE username =%s&quot;</span><br><span class="line">    try:</span><br><span class="line">        cursor.execute(sql_select, (from_user))  # 查询群昵称在数据库是否存在</span><br><span class="line">        result = cursor.fetchall()</span><br><span class="line">        db_conn.commit()</span><br><span class="line">        if (len(result) &gt; 0):</span><br><span class="line">            print(&quot;已存在：&quot; + str(result))</span><br><span class="line">            groups_name = str(result[0][&#x27;nickname&#x27;])</span><br><span class="line">            print(&quot;已存在：&quot; + groups_name)  # 群名称</span><br><span class="line">            if (groups_name in reply_group.values()):</span><br><span class="line">                # chat_rooms = itchat.search_chatrooms(name=groups_name)</span><br><span class="line">                # if (len(chat_rooms) &gt; 0):</span><br><span class="line">                #     itchat.send_msg(&#x27;测试：这是一条自动回复消息,群昵称：%s,消息是：%s&#x27; % (content, groups_name), chat_rooms[0][&#x27;UserName&#x27;])</span><br><span class="line">                # else:</span><br><span class="line">                #     print(&quot;chat_rooms_len==0&quot;)</span><br><span class="line">                try:</span><br><span class="line">                    itchat.send_msg(&#x27;测试：这是一条自动回复消息,群昵称：%s,消息是：%s&#x27; % (content, groups_name), from_user)</span><br><span class="line">                except:</span><br><span class="line">                    print(&quot;发送失败&quot;)</span><br><span class="line">            else:</span><br><span class="line">                print(&quot;不在自动恢复列表里&quot;)</span><br><span class="line"></span><br><span class="line">        else:</span><br><span class="line">            print(&quot;未找到群&quot;)</span><br><span class="line">            # sql_insert_group = &quot;&quot;&quot;INSERT INTO groups (nickname,username, remarkname</span><br><span class="line">            #                 , signature, province,city,membercount,sex</span><br><span class="line">            #                 ,attrstatus,snsflag,contactflag,headimgurl,time) VALUES (&#x27;%s&#x27;,&#x27;%s&#x27;</span><br><span class="line">            #                 ,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;,&#x27;%s&#x27;)&quot;&quot;&quot; % (</span><br><span class="line">            #     str(msg[&#x27;NickName&#x27;]), str(msg[&#x27;UserName&#x27;]), str(msg[&#x27;RemarkName&#x27;])</span><br><span class="line">            #     , str(msg[&#x27;Signature&#x27;]), str(msg[&#x27;Province&#x27;]), str(msg[&#x27;City&#x27;]), str(msg[&#x27;MemberCount&#x27;])</span><br><span class="line">            #     , str(msg[&#x27;Sex&#x27;]), str(msg[&#x27;AttrStatus&#x27;]), str(msg[&#x27;SnsFlag&#x27;]), str(msg[&#x27;ContactFlag&#x27;])</span><br><span class="line">            #     , str(msg[&#x27;HeadImgUrl&#x27;]), time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()))</span><br><span class="line">            # cursor.execute(sql_insert_group)</span><br><span class="line">            # db_conn.commit()</span><br><span class="line">    except Exception as e:</span><br><span class="line">        # db.rollback() # 发生错误时回滚</span><br><span class="line">        print(&quot;Error&quot;, e)</span><br><span class="line">    finally:</span><br><span class="line">        # 关闭数据库连接</span><br><span class="line">        cursor.close()</span><br><span class="line">        db_conn.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="执行方法"><a href="#执行方法" class="headerlink" title="执行方法"></a>执行方法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    # sched = BlockingScheduler()</span><br><span class="line">    itchat.auto_login(loginCallback=after_login, exitCallback=after_logout)</span><br><span class="line">    result = itchat.search_friends()  # 获取自己的用户信息，返回自己的属性字典</span><br><span class="line">    # my_name = result.NickName</span><br><span class="line">    my_UserName = result.UserName  # 我的id（用于判断是否是我发的消息）</span><br><span class="line">    itchat.run()</span><br></pre></td></tr></table></figure><p><a href="https://github.com/zccguagua/python_demo/blob/master/wechat/SendMessage.py">代码及数据库链接</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="Python" scheme="https://zcccool.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>小程序-音乐播放器</title>
    <link href="https://zcccool.cn/2019/11/05/%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/"/>
    <id>https://zcccool.cn/2019/11/05/%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/</id>
    <published>2019-11-05T07:05:48.000Z</published>
    <updated>2021-05-25T16:54:08.574Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_02.jpg" title="Image"></p><h3 id="微信小程序音乐播放器"><a href="#微信小程序音乐播放器" class="headerlink" title="微信小程序音乐播放器"></a>微信小程序音乐播放器</h3><h4 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h4><p>1.显示歌曲名称，作者，歌曲封面图，播放进度条，播放时间进度</p><p>2.控制音乐播放/暂停，音量大小，拖动指定位置播放，切换单曲/循环播放</p><p>效果图</p><p><img src="/images/cover/music_image.jpg" alt="image"></p><h4 id="歌曲数据"><a href="#歌曲数据" class="headerlink" title="歌曲数据"></a>歌曲数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  music_list: [&#123;</span><br><span class="line">      name: &#x27;日落倾城&#x27;,</span><br><span class="line">      author: &#x27;卡奇社&#x27;,</span><br><span class="line">      src: &#x27;http://image.onepeace.top/my_music_%E6%97%A5%E5%85%89%E5%80%BE%E5%9F%8E.mp3&#x27;,</span><br><span class="line">      cover: &#x27;../image/another/music_bg_11.png&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: &#x27;安河桥&#x27;,</span><br><span class="line">      author: &#x27;宋东野&#x27;,</span><br><span class="line">      src: &#x27;http://image.onepeace.top/my_music_%E5%AE%89%E5%92%8C%E6%A1%A5.mp3&#x27;,</span><br><span class="line">      cover: &#x27;../image/another/music_bg.jpg&#x27;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;view id=&quot;control-top&quot;&gt;</span><br><span class="line">  &lt;view id=&quot;head-box&quot;&gt;</span><br><span class="line">    &lt;image id=&quot;left-image&quot; src=&quot;&#123;&#123;poster&#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;/image&gt;</span><br><span class="line">    &lt;view id=&quot;cover-image&quot;&gt;</span><br><span class="line">      &lt;image class=&quot;image-play &#123;&#123;!isPlay?&#x27;view_show&#x27;:&#x27;view_hide&#x27;&#125;&#125;&quot; bindtap=&quot;playMusic&quot; src=&quot;../image/icon/music_play.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;image class=&quot;image-play &#123;&#123;isPlay?&#x27;view_show&#x27;:&#x27;view_hide&#x27;&#125;&#125;&quot; bindtap=&quot;pauseMusic&quot; src=&quot;../image/icon/music_pause.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">  &lt;view id=&quot;right-box&quot;&gt;</span><br><span class="line">    &lt;text id=&quot;music-name&quot;&gt;&#123;&#123;name&#125;&#125;&lt;/text&gt;</span><br><span class="line">    &lt;view id=&quot;author-line&quot;&gt;</span><br><span class="line">      &lt;text style=&quot;font-size:24rpx;&quot;&gt;&#123;&#123;author&#125;&#125;&lt;/text&gt;</span><br><span class="line">      &lt;image class=&quot;image-icon &#123;&#123;!singleCycle?&#x27;view_show&#x27;:&#x27;view_hide&#x27;&#125;&#125;&quot; bindtap=&quot;playWay&quot; src=&quot;../image/icon/music_loop.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;image class=&quot;image-icon &#123;&#123;singleCycle?&#x27;view_show&#x27;:&#x27;view_hide&#x27;&#125;&#125;&quot; bindtap=&quot;playWay&quot; src=&quot;../image/icon/music_single.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;slider id=&quot;progress-music&quot; class=&quot;def-slider&quot; max=&quot;&#123;&#123;slider_max&#125;&#125;&quot; value=&quot;&#123;&#123;slider_value&#125;&#125;&quot; bindchange=&quot;slider_change&quot; activeColor=&quot;#d94240&quot; block-size=&quot;12&quot;&gt;&lt;/slider&gt;</span><br><span class="line">    &lt;view id=&quot;bottom&quot;&gt;</span><br><span class="line">      &lt;view&gt;</span><br><span class="line">        &lt;text&gt;&#123;&#123;currentTime&#125;&#125;&lt;/text&gt;</span><br><span class="line">        &lt;text&gt;/&lt;/text&gt;</span><br><span class="line">        &lt;text&gt;&#123;&#123;duration&#125;&#125;&lt;/text&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">      &lt;image class=&quot;image-icon &#123;&#123;!isSilence?&#x27;view_show&#x27;:&#x27;view_hide&#x27;&#125;&#125;&quot; src=&quot;../image/icon/music_voice.png&quot; bindtap=&quot;setVoiceSilence&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;image class=&quot;image-icon &#123;&#123;isSilence?&#x27;view_show&#x27;:&#x27;view_hide&#x27;&#125;&#125;&quot; src=&quot;../image/icon/music_silence.png&quot; bindtap=&quot;setVoiceMax&quot;&gt;&lt;/image&gt;</span><br><span class="line"></span><br><span class="line">      &lt;slider class=&quot;def-slider&quot; max=&quot;10&quot; value=&quot;&#123;&#123;voice_value&#125;&#125;&quot; bindchange=&quot;voice_change&quot; activeColor=&quot;#d94240 &quot; block-size=&quot;12 &quot;  style=&quot;width:100rpx &quot;&gt;&lt;/slider&gt;</span><br><span class="line">      &lt;image class=&quot;image-icon&quot; bindtap=&quot;spreadList&quot; src=&quot;../image/icon/music_list.png &quot;&gt;&lt;/image&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><h4 id="样式调整"><a href="#样式调整" class="headerlink" title="样式调整"></a>样式调整</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">/* pages/music/music.wxss */</span><br><span class="line"></span><br><span class="line">#control-top &#123;</span><br><span class="line">  margin-top: 20rpx;</span><br><span class="line">  width: 700rpx;</span><br><span class="line">  height: 200rpx;</span><br><span class="line">  margin-left: 25rpx;</span><br><span class="line">  border-radius: 20rpx;</span><br><span class="line">  border: lightgrey;</span><br><span class="line">  border-style: solid;</span><br><span class="line">  border-width: 1px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#head-box &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#cover-image &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.image-play &#123;</span><br><span class="line">  opacity: 0.5;</span><br><span class="line">  width: 70rpx;</span><br><span class="line">  height: 70rpx;</span><br><span class="line">  margin: 0 60rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#left-image &#123;</span><br><span class="line">  width: 190rpx;</span><br><span class="line">  height: 190rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#right-box &#123;</span><br><span class="line">  width: 450rpx;</span><br><span class="line">  height: 180rpx;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  margin-right: 28rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#music-name &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#author-line &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 34rpx;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.def-slider &#123;</span><br><span class="line">  padding-top: 5rpx;</span><br><span class="line">  padding-bottom: 5rpx;</span><br><span class="line">  height: 28rpx;</span><br><span class="line">  margin: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#progress-music &#123;</span><br><span class="line">  margin-left: 10rpx;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#bottom &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  width: 100%;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.image-icon &#123;</span><br><span class="line">  width: 35rpx;</span><br><span class="line">  height: 35rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.my_audio &#123;</span><br><span class="line">  margin-top: 15rpx;</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.list-view &#123;</span><br><span class="line">  margin-top: 20rpx;</span><br><span class="line">  height: 75vh;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.text-view &#123;</span><br><span class="line">  width: 95%;</span><br><span class="line">  padding-left: 25rpx;</span><br><span class="line">  padding-right: 25rpx;</span><br><span class="line">  padding-top: 15rpx;</span><br><span class="line">  padding-bottom: 15rpx;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.music-name &#123;</span><br><span class="line">  font-size: 30rpx;</span><br><span class="line">  color: #36282b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.music-author &#123;</span><br><span class="line">  font-size: 22rpx;</span><br><span class="line">  color: #7a7374;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.view_show &#123;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.view_hide &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="播放控制"><a href="#播放控制" class="headerlink" title="播放控制"></a>播放控制</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br></pre></td><td class="code"><pre><span class="line">// pages/music/music.js</span><br><span class="line">var util = require(&#x27;./util.js&#x27;); //引用外部的js文件</span><br><span class="line">const my_audio = wx.createInnerAudioContext();</span><br><span class="line">var second = 0; //时间参考</span><br><span class="line">var currentMusicId = 0;</span><br><span class="line">Page(&#123;</span><br><span class="line">  /**</span><br><span class="line">   * 页面的初始数据</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    isPlay: false,</span><br><span class="line">    poster: &#x27;../image/another/music_bg_11.png&#x27;,</span><br><span class="line">    name: &#x27;日光倾城&#x27;,</span><br><span class="line">    author: &#x27;卡奇社&#x27;,</span><br><span class="line">    src: &#x27;http://image.onepeace.top/my_music_%E6%97%A5%E5%85%89%E5%80%BE%E5%9F%8E.mp3&#x27;,</span><br><span class="line">    currentTime: &#x27;00:00&#x27;, //当前播放时间（00：03）</span><br><span class="line">    duration: &#x27;00:00&#x27;, //音乐时长（05：25）</span><br><span class="line">    slider_max: 100, //音乐进度条时长（秒）</span><br><span class="line">    slider_value: 0, //音乐进度条进度（秒）</span><br><span class="line">    voice_value: 10, //音量控制（0-10）</span><br><span class="line">    music_list: util.music_list,</span><br><span class="line">    isSilence: false, //是否静音</span><br><span class="line">    singleCycle: false, //是否单曲循环</span><br><span class="line">    spread:true</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面加载</span><br><span class="line">   */</span><br><span class="line">  onLoad: function(options) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    my_audio.onPlay(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;开始播放&#x27;);</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;isPlay&quot;: true</span><br><span class="line">      &#125;);</span><br><span class="line">      var dura = this.secondToTime(my_audio.duration);</span><br><span class="line">      setTimeout(function() &#123;</span><br><span class="line">        that.setData(&#123;</span><br><span class="line">          &quot;duration&quot;: dura,</span><br><span class="line">          &quot;slider_max&quot;: parseInt(my_audio.duration)</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;, 1000);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">    my_audio.onError((res) =&gt; &#123;</span><br><span class="line">      console.log(res.errMsg)</span><br><span class="line">      console.log(res.errCode)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    my_audio.onPause(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;暂停播放&#x27;);</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;isPlay&quot;: false</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    my_audio.onStop((res) =&gt; &#123;</span><br><span class="line">      console.log(&#x27;音频停止&#x27;);</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;isPlay&quot;: false,</span><br><span class="line">        &quot;slider_max&quot;: 100</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    my_audio.onEnded((res) =&gt; &#123;</span><br><span class="line">      console.log(&#x27;自然播放至结束位置&#x27;);</span><br><span class="line">      var dura = this.secondToTime(my_audio.duration);</span><br><span class="line">      console.log(&quot;时长：&quot; + dura);</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;currentTime&quot;: dura,</span><br><span class="line">        &quot;slider_max&quot;: 100</span><br><span class="line">      &#125;);</span><br><span class="line">      this.switchMusic();</span><br><span class="line">    &#125;);</span><br><span class="line">    my_audio.onCanplay((res) =&gt; &#123;</span><br><span class="line">      console.log(&quot;监听音频进入可以播放状态的事件&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">    my_audio.onTimeUpdate((res) =&gt; &#123;</span><br><span class="line">      var time = my_audio.currentTime;</span><br><span class="line">      //刷新音频时长</span><br><span class="line">      if (this.data.slider_max &lt; 150) &#123;</span><br><span class="line">        var dura = this.secondToTime(my_audio.duration);</span><br><span class="line">        // console.log(&quot;时长：&quot; + dura);</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          &quot;duration&quot;: dura,</span><br><span class="line">          &quot;slider_max&quot;: parseInt(my_audio.duration)</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (time - second &gt;= 1) &#123;</span><br><span class="line">        // console.log(second);</span><br><span class="line">        second = parseInt(time);</span><br><span class="line">        // console.log(&quot;当前时长：&quot; + second);</span><br><span class="line">        var cuTime = this.secondToTime(second);</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          &quot;currentTime&quot;: cuTime,</span><br><span class="line">          &quot;slider_value&quot;: second</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面初次渲染完成</span><br><span class="line">   */</span><br><span class="line">  onReady: function() &#123;</span><br><span class="line">    my_audio.autoplay = false;</span><br><span class="line">    my_audio.src = this.data.src;</span><br><span class="line">    // my_audio.loop = true;//循环播放</span><br><span class="line">    my_audio.play();</span><br><span class="line">    my_audio.pause();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面显示</span><br><span class="line">   */</span><br><span class="line">  onShow: function() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面隐藏</span><br><span class="line">   */</span><br><span class="line">  onHide: function() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面卸载</span><br><span class="line">   */</span><br><span class="line">  onUnload: function() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面相关事件处理函数--监听用户下拉动作</span><br><span class="line">   */</span><br><span class="line">  onPullDownRefresh: function() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面上拉触底事件的处理函数</span><br><span class="line">   */</span><br><span class="line">  onReachBottom: function() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 用户点击右上角分享</span><br><span class="line">   */</span><br><span class="line">  onShareAppMessage: function() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  /**切换歌曲 */</span><br><span class="line">  select_music: function(e) &#123;</span><br><span class="line">    second = 0;</span><br><span class="line">    // my_audio.stop();</span><br><span class="line">    // my_audio.offTimeUpdate();</span><br><span class="line">    var name = e.currentTarget.dataset[&#x27;name&#x27;];</span><br><span class="line">    var author = e.currentTarget.dataset[&#x27;author&#x27;];</span><br><span class="line">    var src = e.currentTarget.dataset[&#x27;src&#x27;];</span><br><span class="line">    var cover = e.currentTarget.dataset[&#x27;cover&#x27;];</span><br><span class="line">    var index = e.currentTarget.dataset[&#x27;index&#x27;];</span><br><span class="line">    currentMusicId = index;</span><br><span class="line">    console.log(name);</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      &quot;poster&quot;: cover,</span><br><span class="line">      &quot;name&quot;: name,</span><br><span class="line">      &quot;author&quot;: author,</span><br><span class="line">      &quot;src&quot;: src,</span><br><span class="line">      &quot;slider_max&quot;: 100</span><br><span class="line">    &#125;);</span><br><span class="line">    my_audio.src = this.data.src;</span><br><span class="line">    my_audio.play();</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  playMusic: function() &#123;</span><br><span class="line">    my_audio.play();</span><br><span class="line">  &#125;,</span><br><span class="line">  pauseMusic: function() &#123;</span><br><span class="line">    my_audio.pause();</span><br><span class="line">  &#125;,</span><br><span class="line">  /**秒==&gt; &#x27;00:00&#x27; */</span><br><span class="line">  secondToTime: function(result) &#123;</span><br><span class="line">    var m = Math.floor((result / 60 % 60)) &lt; 10 ? &#x27;0&#x27; + Math.floor((result / 60 % 60)) : Math.floor((result / 60 % 60));</span><br><span class="line">    var s = Math.floor((result % 60)) &lt; 10 ? &#x27;0&#x27; + Math.floor((result % 60)) : Math.floor((result % 60));</span><br><span class="line">    return result = m + &quot;:&quot; + s;</span><br><span class="line">  &#125;,</span><br><span class="line">  /**进度条拖动 */</span><br><span class="line">  slider_change: function(result) &#123;</span><br><span class="line">    var step = result.detail.value;</span><br><span class="line">    second = step;</span><br><span class="line">    // var dura = this.secondToTime(my_audio.duration);</span><br><span class="line">    // console.log(&quot;时长：&quot; + dura);</span><br><span class="line">    // this.setData(&#123;</span><br><span class="line">    //   &quot;slider_max&quot;: parseInt(my_audio.duration),</span><br><span class="line">    //   &quot;duration&quot;: dura</span><br><span class="line">    // &#125;);</span><br><span class="line">    my_audio.pause();</span><br><span class="line">    my_audio.seek(step);</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">      my_audio.play();</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;,</span><br><span class="line">  /**调整音量 */</span><br><span class="line">  voice_change: function(result) &#123;</span><br><span class="line">    var step = result.detail.value;</span><br><span class="line">    // console.log(&quot;拖动：&quot; + step);</span><br><span class="line">    var curVoice = parseFloat(step / 10);</span><br><span class="line">    // console.log(curVoice);</span><br><span class="line">    my_audio.volume = curVoice;</span><br><span class="line">    if (step &gt; 0) &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;isSilence&quot;: false,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; else if (step == 0) &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;isSilence&quot;: true,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  /**设置静音 */</span><br><span class="line">  setVoiceSilence: function() &#123;</span><br><span class="line">    my_audio.volume = 0;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      &quot;isSilence&quot;: true,</span><br><span class="line">      &quot;voice_value&quot;: 0</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  setVoiceMax: function() &#123;</span><br><span class="line">    my_audio.volume = 1;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      &quot;isSilence&quot;: false,</span><br><span class="line">      &quot;voice_value&quot;: 10</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  /**自动播放下一首 */</span><br><span class="line">  switchMusic: function() &#123;</span><br><span class="line">    var musicSize = util.music_list.length;</span><br><span class="line">    console.log(&quot;数量:&quot; + musicSize);</span><br><span class="line">    second = 0;</span><br><span class="line">    if (this.data.singleCycle) &#123;</span><br><span class="line">      var itemMusic = util.music_list[currentMusicId];</span><br><span class="line">      console.log(itemMusic.name);</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;poster&quot;: itemMusic.cover,</span><br><span class="line">        &quot;name&quot;: itemMusic.name,</span><br><span class="line">        &quot;author&quot;: itemMusic.author,</span><br><span class="line">        &quot;src&quot;: itemMusic.src,</span><br><span class="line">        &quot;slider_value&quot;: 0</span><br><span class="line">      &#125;);</span><br><span class="line">      my_audio.src = this.data.src;</span><br><span class="line">      my_audio.play();</span><br><span class="line"></span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      if (currentMusicId &gt;= (musicSize - 1)) &#123;</span><br><span class="line">        //列表最后一首,播放第一首</span><br><span class="line">        var itemMusic = util.music_list[0];</span><br><span class="line">        console.log(itemMusic.name);</span><br><span class="line">        currentMusicId = 0;</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          &quot;poster&quot;: itemMusic.cover,</span><br><span class="line">          &quot;name&quot;: itemMusic.name,</span><br><span class="line">          &quot;author&quot;: itemMusic.author,</span><br><span class="line">          &quot;src&quot;: itemMusic.src,</span><br><span class="line">          &quot;slider_value&quot;: 0</span><br><span class="line">        &#125;);</span><br><span class="line">        my_audio.src = this.data.src;</span><br><span class="line">        my_audio.play();</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        //播放下一首</span><br><span class="line">        var itemMusic = util.music_list[currentMusicId + 1];</span><br><span class="line">        console.log(itemMusic.name);</span><br><span class="line">        currentMusicId++;</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          &quot;poster&quot;: itemMusic.cover,</span><br><span class="line">          &quot;name&quot;: itemMusic.name,</span><br><span class="line">          &quot;author&quot;: itemMusic.author,</span><br><span class="line">          &quot;src&quot;: itemMusic.src,</span><br><span class="line">          &quot;slider_value&quot;: 0</span><br><span class="line">        &#125;);</span><br><span class="line">        my_audio.src = this.data.src;</span><br><span class="line">        my_audio.play();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  playWay: function() &#123;</span><br><span class="line">    if (this.data.singleCycle == true) &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;singleCycle&quot;: false</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;singleCycle&quot;: true</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, spreadList:function()&#123;</span><br><span class="line">    if (this.data.spread == true) &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;spread&quot;: false</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        &quot;spread&quot;: true</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://github.com/zccguagua/Leap-Orange">代码链接https://github.com/zccguagua/Leap-Orange</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="小程序" scheme="https://zcccool.cn/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>龙虎山游记</title>
    <link href="https://zcccool.cn/2019/10/13/%E9%BE%99%E8%99%8E%E5%B1%B1%E6%B8%B8%E8%AE%B0/"/>
    <id>https://zcccool.cn/2019/10/13/%E9%BE%99%E8%99%8E%E5%B1%B1%E6%B8%B8%E8%AE%B0/</id>
    <published>2019-10-13T14:04:27.000Z</published>
    <updated>2020-01-06T15:52:41.660Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_12.jpg" alt="竹筏" title="鹰潭"></p><h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><p>每年国庆出去玩都是个头疼的问题，授予资金限制（穷），考虑热门景点人潮拥挤，最优选择是去一些路途不是很远的、相对不是十分热门的景点，今年打算和同学约好去道教发祥地–江西的龙虎山玩</p><h3 id="Day01"><a href="#Day01" class="headerlink" title="Day01"></a>Day01</h3><p>从合肥到鹰潭高铁三个多小时，到时已是中午，合肥可以说比鹰潭繁华太多，这边很少高楼大厦，更像是家乡的小县城，这边温度也比合肥高很多。我们汇合后找到地方住下准备第二天出发去龙虎山。<br>下午我们逛了鹰潭的商场在商场发现里面有电玩城，就在里面打了一下午的游戏😂<br>虚度了一下午，天快黑了，找吃的，顺便逛了一下鹰潭公园。站在鹰潭公园塔上面俯视这个城市的灯红酒绿。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_01.jpg" alt="茶壶" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_02.jpg" alt="街灯" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_03.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_04.jpg" title="鹰潭"></p><h3 id="Day02"><a href="#Day02" class="headerlink" title="Day02"></a>Day02</h3><p>出发去龙虎山了，这边真的没有拥挤的人潮，不用排队<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_05.jpg" alt="后视镜" title="鹰潭"><br>丹霞地貌的山，这边的山不是很高只有海拔一百多米<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_08.jpg" alt="丹霞" title="鹰潭"><br>爬上山开启自拍模式<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_06.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_07.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_16.jpg" title="鹰潭"><br>看了一场”升棺表演”，龙虎山的崖墓是中国一绝，景区开发了升棺表演，因升棺谐音”升官”<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_09.jpg" alt="升官" title="鹰潭"><br>这边景区挺大的，有很多景点，每个景点之间有公交车循环开，开启景点打卡模式<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_12.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_13.jpg" alt="屋檐" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_14.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_11.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_17.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_19.jpg" alt="大殿" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_20.jpg" title="鹰潭"><br>最有意思的应该是这边的竹筏漂流了，小小竹筏江中游，两岸风景美如画<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_21.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_10.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_22.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_23.jpg" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_24.jpg" title="鹰潭"><br>晚上景区还有个有意思的项目行进式实景演出”寻梦龙虎山”<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_25.jpg" alt="表演" title="鹰潭"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/yingtan/yingtan_26.jpg" title="鹰潭"></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>景区风景不错有山有水，游客也不是很多，是个值得去一次的地方</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="旅行" scheme="https://zcccool.cn/tags/%E6%97%85%E8%A1%8C/"/>
    
    <category term="龙虎山" scheme="https://zcccool.cn/tags/%E9%BE%99%E8%99%8E%E5%B1%B1/"/>
    
  </entry>
  
  <entry>
    <title>Android问题与解决5</title>
    <link href="https://zcccool.cn/2019/10/13/Android%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B35/"/>
    <id>https://zcccool.cn/2019/10/13/Android%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B35/</id>
    <published>2019-10-13T06:09:00.000Z</published>
    <updated>2021-05-25T16:59:18.547Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/ins_01.jpg" title="Image"></p><p><a href="#question_01">1.关于ping外网问题</a><br><a href="#question_02">2.定时器的使用</a><br><a href="#question_03">3.线程及超时方法</a><br><a href="#question_04">3.线程池</a></p><h3 id="关于ping外网问题"><a href="#关于ping外网问题" class="headerlink" title="关于ping外网问题"></a><span id="question_01">关于ping外网问题</span></h3><p>需求：判断外网是否连接。<br>问题：连接网线安卓设备中，在插上网线但是外网不通处于局域网时，isConnected依然返回true。<br>解决：需要判断外网是否通<br>方法：采用pingIP的方法判断外网 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Process process = Runtime.getRuntime().exec(&quot;ping -c 3 -w 100 8.8.8.8);</span><br><span class="line">//-c 是指ping的次数 3是指ping 3次 ，-w 100  以秒为单位指定超时间隔，是指超时时间为100秒 </span><br></pre></td></tr></table></figure><p>但是此方法使用一直无效，<br>在stackoverflow找到解决方法：加/system/bin/ping<br>Process process = Runtime.getRuntime().exec(“/system/bin/ping -c 3 -w 100 <a href="http://www.baidu.com&quot;/">www.baidu.com&quot;</a>);</p><h4 id="主要方法："><a href="#主要方法：" class="headerlink" title="主要方法："></a>主要方法：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public static boolean executeCommand() &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        Process mIpAddrProcess = runtime.exec(&quot;/system/bin/ping -c 2 -w 100 www.baidu.com&quot;);</span><br><span class="line">        int mExitValue = mIpAddrProcess.waitFor();</span><br><span class="line">        if (mExitValue == 0) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (InterruptedException ignore) &#123;</span><br><span class="line">        ignore.printStackTrace();</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意要在子线程执行耗时操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exception:android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.</span><br></pre></td></tr></table></figure><h3 id="定时器的使用"><a href="#定时器的使用" class="headerlink" title="定时器的使用"></a><span id="question_02">定时器的使用</span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">   private Timer mTimer;</span><br><span class="line">   private TimerTask mTimerTask;</span><br><span class="line">//使用：</span><br><span class="line">stopTimer();</span><br><span class="line">    mTimer = new Timer();</span><br><span class="line">    mTimerTask = new TimerTask() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            if (count &gt;= COUNT_NUM) &#123;</span><br><span class="line">                stopTimer();</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                count++;</span><br><span class="line">                orderCheck();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">//d秒后开始，每p秒执行一次</span><br><span class="line">    if (mTimer != null &amp;&amp; mTimerTask != null)</span><br><span class="line">        mTimer.schedule(mTimerTask, d * 1000, p * 1000);</span><br></pre></td></tr></table></figure><p>停止方法        </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private void stopTimer() &#123;</span><br><span class="line">       count = 0;</span><br><span class="line">       if (mTimer != null) &#123;</span><br><span class="line">           mTimer.cancel();</span><br><span class="line">           mTimer = null;</span><br><span class="line">       &#125;</span><br><span class="line">       if (mTimerTask != null) &#123;</span><br><span class="line">           mTimerTask.cancel();</span><br><span class="line">           mTimerTask = null;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="线程及超时方法"><a href="#线程及超时方法" class="headerlink" title="线程及超时方法"></a><span id="question_03">线程及超时方法</span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">private Thread thread, workThread;</span><br><span class="line">   private class WorkThread extends Thread &#123;</span><br><span class="line">       @Override</span><br><span class="line">       public void run() &#123;</span><br><span class="line">           //处理比较耗时的操作</span><br><span class="line">           //final Message msg = new Message();//使用下面方法</span><br><span class="line">           final Message msg = mHandler.obtainMessage();</span><br><span class="line">           msg.what = MSG_NERWORK_ICON;</span><br><span class="line">           msg.arg1 = 1;</span><br><span class="line">           Callable&lt;String&gt; task = new Callable&lt;String&gt;() &#123;</span><br><span class="line">               @Override</span><br><span class="line">               public String call() throws Exception &#123;</span><br><span class="line">                   //执行耗时代码</span><br><span class="line">                   if ( IpUtil.executeCommand()) &#123;</span><br><span class="line">                       msg.arg1 = 1;</span><br><span class="line">                   &#125; else &#123;</span><br><span class="line">                       msg.arg1 = 0;</span><br><span class="line">                   &#125;</span><br><span class="line">                   return &quot;success&quot;;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;;</span><br><span class="line">           //设置超时时间，指定时间未执行完则中断</span><br><span class="line">           ExecutorService executorService = Executors.newSingleThreadExecutor();</span><br><span class="line">           Future&lt;String&gt; future = executorService.submit(task);</span><br><span class="line">           try &#123;</span><br><span class="line">               //设置超时时间</span><br><span class="line">               String rst = future.get(5, TimeUnit.SECONDS);</span><br><span class="line">               System.out.println(rst);</span><br><span class="line">           &#125; catch (TimeoutException e) &#123;</span><br><span class="line">               msg.arg1 = 0;</span><br><span class="line">               NbLogUtil.d(TAG, &quot;ExecuteCommand Overtime&quot;);</span><br><span class="line">           &#125; catch (Exception e) &#123;</span><br><span class="line">               NbLogUtil.d(TAG, &quot;exception:&quot; + e.getMessage());</span><br><span class="line">           &#125; finally &#123;</span><br><span class="line">               executorService.shutdown();</span><br><span class="line">           &#125;</span><br><span class="line">           mHandler.sendMessage(msg);//发送消息更新UI</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="注意：线程未执行完退出时会出现报错"><a href="#注意：线程未执行完退出时会出现报错" class="headerlink" title="注意：线程未执行完退出时会出现报错"></a>注意：线程未执行完退出时会出现报错</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">   public void onDestroy() &#123;</span><br><span class="line">       super.onDestroy();</span><br><span class="line">       mHandler.removeCallbacksAndMessages(null);//未执行完的handler也要关闭</span><br><span class="line">       try &#123;</span><br><span class="line">           workThread.interrupt();//中断线程</span><br><span class="line">       &#125; catch (Exception e) &#123;</span><br><span class="line">           NbLogUtil.d(TAG, &quot;workThread Exception&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="创建基本线程池"><a href="#创建基本线程池" class="headerlink" title="创建基本线程池"></a><span id="question_04">创建基本线程池</span></h3><p>corePoolSize: 该线程池中核心线程的数量。</p><p>注意：线程池中存在核心线程与非核心线程，核心线程一旦创建会一直执行任务或等待任务到来，而非核心线程只在任务队列塞满任务时去执行多出的任务，并且非核心线程在等待一段时间后将会被回收，这个时间作为参数可调配，见下面的keepAliveTime参数。</p><p>maximumPoolSize：该线程池中最大线程数量。(区别于corePoolSize)</p><p>keepAliveTime:从字面上就可以理解，是非核心线程空闲时要等待下一个任务到来的时间，当任务很多，每个任务执行时间很短的情况下调大该值有助于提高线程利用率。注意：当allowCoreThreadTimeOut属性设为true时，该属性也可用于核心线程。</p><p>unit:上面时间属性的单位</p><p>workQueue:任务队列，后面详述。</p><p>threadFactory:线程工厂，可用于设置线程名字等等，一般无须设置该参数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public ThreadPoolExecutor(int corePoolSize,</span><br><span class="line">                              int maximumPoolSize,</span><br><span class="line">                              long keepAliveTime,</span><br><span class="line">                              TimeUnit unit,</span><br><span class="line">                              BlockingQueue&lt;Runnable&gt; workQueue,</span><br><span class="line">                              ThreadFactory threadFactory) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    final ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(3,5,1,TimeUnit.SECONDS,</span><br><span class="line">    new LinkedBlockingQueue&lt;Runnable&gt;(100));</span><br></pre></td></tr></table></figure><p>使用<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Runnable runnable = new Runnable() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123; &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">threadPoolExecutor.execute(runnable);</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="Android" scheme="https://zcccool.cn/tags/Android/"/>
    
    <category term="ping" scheme="https://zcccool.cn/tags/ping/"/>
    
    <category term="定时器&amp;线程池" scheme="https://zcccool.cn/tags/%E5%AE%9A%E6%97%B6%E5%99%A8-%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
    
  </entry>
  
  <entry>
    <title>Retorfit使用及问题总结</title>
    <link href="https://zcccool.cn/2019/07/15/Retorfit%E4%BD%BF%E7%94%A8%E5%8F%8A%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    <id>https://zcccool.cn/2019/07/15/Retorfit%E4%BD%BF%E7%94%A8%E5%8F%8A%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/</id>
    <published>2019-07-14T16:11:21.000Z</published>
    <updated>2021-05-25T16:54:08.644Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/watermelon.jpg" title="Image"></p><h3 id="1-创建请求基类方便处理返回结果"><a href="#1-创建请求基类方便处理返回结果" class="headerlink" title="1.创建请求基类方便处理返回结果"></a>1.创建请求基类方便处理返回结果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Retorfit 网络请求基类</span><br><span class="line">public class BaseResponse&lt;T&gt; &#123;</span><br><span class="line">    public int status;</span><br><span class="line">    public String msg;</span><br><span class="line">    public T body;</span><br><span class="line">    public boolean isSuccess()&#123;</span><br><span class="line">        return status == 200;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        final StringBuilder sb = new StringBuilder(&quot;&#123;&quot;);</span><br><span class="line">        sb.append(&quot;\&quot;body\&quot;:&quot;)</span><br><span class="line">                .append(body);</span><br><span class="line">        sb.append(&#x27;&#125;&#x27;);</span><br><span class="line">        return sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-请求方法"><a href="#2-请求方法" class="headerlink" title="2.请求方法"></a>2.请求方法</h3><p>URL请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@GET</span><br><span class="line">Observable&lt;WeatherApiBean&gt; sevenDaysWeather(@Url String url);</span><br></pre></td></tr></table></figure><p>GET 请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@GET(&quot;api/v1.0/version&quot;)</span><br><span class="line">Observable&lt;BaseResponse&lt;Version&gt;&gt; getTerminalVersion(@Header(&quot;token&quot;) String token</span><br><span class="line">, @Query(&quot;type&quot;) int type);</span><br></pre></td></tr></table></figure><p>POST请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@FormUrlEncoded</span><br><span class="line">@POST(&quot;api/v1.0/terminal/login&quot;)</span><br><span class="line">Observable&lt;BaseResponse&lt;Map&lt;String, Object&gt;&gt;&gt; login(@Field(&quot;deviceType&quot;) String deviceType);</span><br></pre></td></tr></table></figure><p>注意  @FormUrlEncoded不可和@Body连用</p><p>DELETE 请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Headers(&quot;Content-Type:application/x-www-form-urlencoded&quot;)</span><br><span class="line">@HTTP(method = &quot;DELETE&quot;, path = &quot;api/v1.0/terminal/bindingAllElder&quot;, hasBody = true)</span><br><span class="line">Observable&lt;Map&lt;String, Object&gt;&gt; bindingAllElder(@Header(&quot;token&quot;) String token</span><br><span class="line">, @Query(&quot;sn&quot;) String sn);</span><br></pre></td></tr></table></figure><h3 id="3-配置证书及拦截器及证书"><a href="#3-配置证书及拦截器及证书" class="headerlink" title="3.配置证书及拦截器及证书"></a>3.配置证书及拦截器及证书</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//将证书放到raw目录下</span><br><span class="line">public static int[] certificates = new int[]&#123;R.raw.zhengshu&#125;;</span><br><span class="line">OkHttpClient.Builder builder = new OkHttpClient.Builder();</span><br><span class="line">     //连接超时时间</span><br><span class="line">     builder.connectTimeout(DEFAULT_TIME_OUT, TimeUnit.SECONDS);</span><br><span class="line">     //写操作 超时时间</span><br><span class="line">     builder.writeTimeout(DEFAULT_READ_TIME_OUT, TimeUnit.SECONDS);</span><br><span class="line">     //读操作超时时间</span><br><span class="line">     builder.readTimeout(DEFAULT_READ_TIME_OUT, TimeUnit.SECONDS);</span><br><span class="line">     //配置https证书</span><br><span class="line">     builder.sslSocketFactory(SslSocketFactory.getSSLSocketFactory(certificates));</span><br><span class="line">     //配置https证书</span><br><span class="line">     builder.hostnameVerifier(SslSocketFactory.getHostnameVerifier());</span><br><span class="line">    //自定义公共拦截器</span><br><span class="line">     HttpCommonInterceptor commonInterceptor = new HttpCommonInterceptor.Builder()</span><br><span class="line">          //添加token</span><br><span class="line">//        .addHeaderParams(&quot;token&quot;, MyApplication.getInstance().getToken())</span><br><span class="line">          .addHeaderParams(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;)</span><br><span class="line">          .build();</span><br><span class="line">     builder.addInterceptor(commonInterceptor);</span><br></pre></td></tr></table></figure><p>项目域名备案期间，后台使用https+ip方式，并给出https证书.pem文件，要在retorfit框架加入证书。</p><p>证书类：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">public class SslSocketFactory &#123;</span><br><span class="line">    private static Context mContext;</span><br><span class="line">    public static javax.net.ssl.SSLSocketFactory getSSLSocketFactory(int[] certificates) &#123;</span><br><span class="line">        mContext = MyApplication.getContext();</span><br><span class="line">        if (mContext == null) &#123;</span><br><span class="line">            throw new NullPointerException(&quot;context == null&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        CertificateFactory certificateFactory;</span><br><span class="line">        SSLContext sslContext = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            certificateFactory = CertificateFactory.getInstance(&quot;X.509&quot;);</span><br><span class="line">            KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());</span><br><span class="line">            keyStore.load(null, null);</span><br><span class="line">            for (int i = 0; i &lt; certificates.length; i++) &#123;</span><br><span class="line">                InputStream certificate = mContext.getResources()</span><br><span class="line">                .openRawResource(certificates[i]);</span><br><span class="line">                keyStore.setCertificateEntry(String.valueOf(i)</span><br><span class="line">                , certificateFactory.generateCertificate(certificate));</span><br><span class="line"></span><br><span class="line">                if (certificate != null) &#123;</span><br><span class="line">                    certificate.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            sslContext = SSLContext.getInstance(&quot;TLS&quot;);</span><br><span class="line">            TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(</span><br><span class="line">            TrustManagerFactory.getDefaultAlgorithm());</span><br><span class="line"></span><br><span class="line">            trustManagerFactory.init(keyStore);</span><br><span class="line">            sslContext.init(null, trustManagerFactory.getTrustManagers()</span><br><span class="line">            , new SecureRandom());</span><br><span class="line"></span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return sslContext.getSocketFactory();</span><br><span class="line">&#125;</span><br><span class="line">    /**</span><br><span class="line">     * 添加https支持</span><br><span class="line">     */</span><br><span class="line">    public static HostnameVerifier getHostnameVerifier() &#123;</span><br><span class="line">        HostnameVerifier hostnameVerifier = new HostnameVerifier() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public boolean verify(String hostname, SSLSession session) &#123;</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        return hostnameVerifier;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意：添加证书后会导致其他服务器的https无法访问，与后台沟通暂无解决方法，幸运的是其他https链接只使用一个，单独对这个链接使用未加证书的okhttp方法。备案成功后，即可去除证书，恢复原有访问方法。</p><h3 id="4-请求参数复杂问题"><a href="#4-请求参数复杂问题" class="headerlink" title="4.请求参数复杂问题"></a>4.请求参数复杂问题</h3><p>当请求参数为json字符串时 如 ?params = “{“identity”:”123”,”name”:”网二”}”;时出现请求错误，原因”{“,”}”等符号和中文会在请求中被转换格式。<br>解决方法：<br>(1)GET请求发送json参数包含{}和中文可以使用对参数转码成utf-8,url拼接地址的形式,使用url作为参数：@Url String url</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String params=&quot;&#123;&quot;identity&quot;:&quot;123&quot;,&quot;name&quot;:&quot;网二&quot;&#125;&quot;</span><br><span class="line">   url=URL+&quot;?params：&quot;+ URLEncoder.encode(params, &quot;utf-8&quot;);//拼接url</span><br></pre></td></tr></table></figure><p>(2)POST请求加入下面即可：<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Headers(&quot;Content-Type:application/x-www-form-urlencoded; charset=utf-8&quot;)</span><br></pre></td></tr></table></figure></p><h3 id="5-链式请求"><a href="#5-链式请求" class="headerlink" title="5.链式请求"></a>5.链式请求</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/*链式请求*/</span><br><span class="line">       loader.deviceRegister(&quot;sn&quot;, &quot;username&quot;, &quot;password&quot;)</span><br><span class="line">               .map(new Function&lt;Map&lt;String, Object&gt;, Observable&lt;Map&lt;String, Object&gt;&gt;&gt;() &#123;</span><br><span class="line">                   @Override</span><br><span class="line">                   public Observable&lt;Map&lt;String, Object&gt;&gt; apply(@NonNull Map&lt;String, Object&gt; map) throws Exception &#123;</span><br><span class="line">                       JSONObject object = new JSONObject(map);</span><br><span class="line">                       String token = object.getString(&quot;token&quot;);</span><br><span class="line">                       return loader.getOrgId(token);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;)</span><br><span class="line">               .observeOn(Schedulers.newThread())</span><br><span class="line">               .subscribe(new Consumer&lt;Observable&lt;Map&lt;String, Object&gt;&gt;&gt;() &#123;</span><br><span class="line">                   @Override</span><br><span class="line">                   public void accept(@NonNull Observable&lt;Map&lt;String, Object&gt;&gt; o) throws Exception &#123;</span><br><span class="line">                       JSONObject object = new JSONObject(o.blockingFirst());</span><br><span class="line">                       String getOrgId  = object.getString(&quot;orgId&quot;);</span><br><span class="line"></span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;, new Consumer&lt;Throwable&gt;() &#123;</span><br><span class="line">                   @Override</span><br><span class="line">                   public void accept(Throwable throwable) throws Exception &#123;</span><br><span class="line">                       Log.e(TAG, &quot;deviceRegister:&quot; + throwable.getMessage());</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>代码参考<a href="https://github.com/zccguagua/RetorfitDemo">Retorfit</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="Android" scheme="https://zcccool.cn/tags/Android/"/>
    
    <category term="Retorfit" scheme="https://zcccool.cn/tags/Retorfit/"/>
    
  </entry>
  
  <entry>
    <title>东极岛--太平洋的第一缕海风</title>
    <link href="https://zcccool.cn/2019/05/20/%E4%B8%9C%E6%9E%81%E5%B2%9B-%E5%A4%AA%E5%B9%B3%E6%B4%8B%E7%9A%84%E7%AC%AC%E4%B8%80%E7%BC%95%E6%B5%B7%E9%A3%8E/"/>
    <id>https://zcccool.cn/2019/05/20/%E4%B8%9C%E6%9E%81%E5%B2%9B-%E5%A4%AA%E5%B9%B3%E6%B4%8B%E7%9A%84%E7%AC%AC%E4%B8%80%E7%BC%95%E6%B5%B7%E9%A3%8E/</id>
    <published>2019-05-20T14:17:37.000Z</published>
    <updated>2021-05-25T16:54:08.497Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><!--![东极岛之旅](http://image.onepeace.top/dongjidao-00.jpg "东极岛之旅")--><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-00.jpg" alt="东极岛之旅" title="东极岛之旅"></p><h3 id="出发"><a href="#出发" class="headerlink" title="出发"></a>出发</h3><p>四月中旬，突然就冒出想去看海的想法，并且在脑海中久久挥之不去，到了夜不能寐的地步，我也不知道这种感觉为何会如此强烈，可能海真的在呼唤我吧。联系了在杭州的同学，在我的蛊惑下拉他一起去看海。那么问题来了：去哪里看海？<br>经过几番搜索选择了东极岛这个号称“中国第一缕曙光的地方”，才知道它就是韩寒的电影《后会无期》的取景地。不错不错，匆匆浏览下攻略，买票准备五一放假出发。</p><h3 id="May-1st"><a href="#May-1st" class="headerlink" title="May 1st"></a>May 1st</h3><p>基本都在坐车。从合肥坐三个多小时高铁到宁波，与杭州来的同学回合。一同再坐两个半小时汽车到达舟山的沈家门，明天坐船的码头就在这里了。此时天色已黑，找到住的宾馆后出来觅食，这里海鲜盛行，花样繁多，我们吃了不少。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-3.jpg" alt="海鲜" title="海鲜"></p><h3 id="May-2nd"><a href="#May-2nd" class="headerlink" title="May 2nd"></a>May 2nd</h3><p>东极岛景区其实是由四个岛组成的，分别是：东福山岛，庙子湖岛，青浜岛，黄兴岛。假期有限，我们选择了其中的两个岛游玩。第一天去号称“第一缕曙光”东福山岛，第二天去主岛庙子湖岛。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-01.jpg" alt="祥和号" title="祥和号"><br>上船了，有点小激动，想起了泰坦尼克号。<br>据说会晕船，船确实有点晃，但我一点晕船的感觉都没有。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-6.jpg" alt="乘风破浪" title="乘风破浪"></p><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-5.jpg" title="东极岛"><br> <div id="dplayer1" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer1"),"video":{"url":"https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-video-1.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><br> <div id="dplayer2" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer2"),"video":{"url":"https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-video-2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><br> <img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-2.jpg" alt="村落" title="村落"><br> <div id="dplayer3" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer3"),"video":{"url":"https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-video-3.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script></p><p>航行两个半小时后到达第一天的目的地：东福山岛<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-21.jpg" alt="地图" title="地图"><br>开始徒步环岛<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-11.jpg" alt="仙人掌" title="仙人掌"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-19.jpg" alt="dog" title="dog"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-18.jpg" title="东极岛"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-20.jpg" alt="路" title="路"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-12.jpg" alt="灯塔" title="灯塔"><br>这里没有人山人海，只有你和大海<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-14.jpg" title="东极岛"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-15.jpg" title="东极岛"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-22.jpg" title="东极岛"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-23.jpg" title="东极岛"><br>海风中没有海的味道，但是确实是凉凉的，特别舒服。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-26.jpg" title="东极岛"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-32.jpg" title="东极岛"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-34.jpg" title="东极岛"><br>合影<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-33.jpg" alt="合影" title="合影"><br>傍晚时分回到旅馆，这里的旅馆大多都是面朝大海的，坐在阳台吹着海风看着太阳缓缓落下，特别安逸祥和。来的时候那艘船就叫“祥和号”，是不是跟这有关呢。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-31.jpg" alt="夕阳" title="夕阳西下"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-29.jpg" title="夕阳西下"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-28.jpg" alt="夕阳" title="夕阳西下"><br>在旅馆老板家楼下吃晚餐<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-4.jpg" alt="晚餐" title="晚餐"></p><h3 id="May-3rd"><a href="#May-3rd" class="headerlink" title="May 3rd"></a>May 3rd</h3><p>四点抹黑起床去看日出<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-43.jpg" alt="晨光" title="晨光"><br>天渐亮<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-42.jpg" title="东极岛"><br>日出<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-41.jpg" alt="日出" title="日出"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-40.jpg" title="日出"><br> <div id="dplayer4" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer4"),"video":{"url":"https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-video-5.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-37.jpg" title="日出"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-36.jpg" title="日出"><br>继续环岛<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-45.jpg" title="东极岛"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-46.jpg" alt="石头" title="石头"><br>超爱下面这张图了：p<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-47.jpg" alt="--&gt;" title="帅气"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-49.jpg" title="东极岛"></p><p>东极岛的标志性建筑–财伯公雕像<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-44.jpg" alt="财伯公雕像" title="财伯公雕像"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-50.jpg" title="东极岛"><br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-53.jpg" title="东极岛"><br>心满意足，不虚此行<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-55.jpg" alt="东极岛" title="东极岛"></p><h3 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h3><p>1.沈家门去东极岛的船票提前三天开始售票，五一人多为了抢票我真的五点起来抢。平时每天只有两班船，所以说岛上人很少，是节假日旅行的理想选择。<br>2.东极岛每年4月到9月是禁渔期，吃的鱼的种类会少，价格也会偏高。<br>3.附五一期间的东极岛航班时间表。<br><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/djd/dongjidao-7.jpg" alt="航班" title="航班"><br>4.回来后又看了一遍电影《后会无期》感觉格外亲切。<br>5.粗略费用：合肥到宁波高铁单程≈300￥，宁波到舟山沈家门汽车单程≈50￥，船票单程≈150￥，住宿一晚≈300￥，吃一次海鲜&gt;200￥</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="旅行" scheme="https://zcccool.cn/tags/%E6%97%85%E8%A1%8C/"/>
    
    <category term="东极岛" scheme="https://zcccool.cn/tags/%E4%B8%9C%E6%9E%81%E5%B2%9B/"/>
    
  </entry>
  
  <entry>
    <title>Android问题与解答4</title>
    <link href="https://zcccool.cn/2018/12/05/Android%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E7%AD%944/"/>
    <id>https://zcccool.cn/2018/12/05/Android%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E7%AD%944/</id>
    <published>2018-12-05T15:21:02.000Z</published>
    <updated>2021-05-25T16:54:08.548Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/girl_night.jpg" title="Image"></p><p><a href="#fastclick">1.判断是否快速点击</a><br><a href="#margins">2.自定义位置</a><br><a href="#timer">3.定时器</a><br><a href="#appendmp4">4.视频合并</a><br><a href="#muchtime">5.方法执行超过指定时间</a></p><h3 id="1-判断是否快速点击"><a href="#1-判断是否快速点击" class="headerlink" title="1.判断是否快速点击"></a><span id = "fastclick">1.判断是否快速点击</span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private static final int MIN_DELAY_TIME= 1000; // 两次点击间隔不能少于1000ms</span><br><span class="line">     private static long lastClickTime; </span><br><span class="line">    public static boolean isFastClick() &#123;</span><br><span class="line"> boolean flag = true;</span><br><span class="line">long currentClickTime = System.currentTimeMillis();</span><br><span class="line"> if ((currentClickTime - lastClickTime) &gt;= MIN_DELAY_TIME) &#123; </span><br><span class="line">flag = false;</span><br><span class="line"> &#125; </span><br><span class="line">lastClickTime = currentClickTime; </span><br><span class="line">return flag; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="2-自定义位置"><a href="#2-自定义位置" class="headerlink" title="2.自定义位置"></a><span id = "margins">2.自定义位置</span></h3><p><a href="https://www.cnblogs.com/Annoying/p/5402339.html">RelativeLayout.addRule()方法</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">private RelativeLayout.LayoutParams videoParams；</span><br><span class="line">videoParams = (RelativeLayout.LayoutParams) video.getLayoutParams();</span><br><span class="line">videoParams.addRule(RelativeLayout.BELOW, R.id.recyclerTip_layout);</span><br><span class="line">videoParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);</span><br><span class="line">videoParams.setMargins(10, 10, 0, 0);//左上右下</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//设置位置</span><br><span class="line"> Drawable helpImg = getResources().getDrawable(R.drawable.alarm);//一张图片</span><br><span class="line"> //设置位置前两个是组件左上角在容器中的坐标，后两个是组件的宽度和高度 </span><br><span class="line">        helpImg.setBounds(0, 50, 150, 200);</span><br><span class="line">        //讲图片在main_help中固定位置</span><br><span class="line">        main_help.setCompoundDrawables(null, helpImg, null, null);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-定时器"><a href="#3-定时器" class="headerlink" title="3.定时器"></a><span id = "timer">3.定时器</span></h3><h4 id="service里设置开机启动"><a href="#service里设置开机启动" class="headerlink" title="service里设置开机启动"></a>service里设置开机启动</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    @Override</span><br><span class="line">    protected void startMainActivity() &#123;</span><br><span class="line">   //分机背光时间设置</span><br><span class="line">        BackLightUtils.getInstance().openCallUploadTimer(getApplicationContext());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="定义类方法"><a href="#定义类方法" class="headerlink" title="定义类方法"></a>定义类方法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">public class TimerManager &#123;</span><br><span class="line"></span><br><span class="line">    public static final String TAG = &quot;TimerManager&quot;;</span><br><span class="line">    public static final String ACTION = &quot;com.lonbon.lonbonbroadcast.manager.TestReceiver&quot;;</span><br><span class="line">    private static final int TIME_INTERVAL = 1000 * 60 * 60 * 24;// 24h</span><br><span class="line">    private Integer[] weeks;</span><br><span class="line">    private int weeksIndex;</span><br><span class="line">    private TimerManagerCallback timerManagerCallback;</span><br><span class="line">    private static final String HOUR = &quot;hour&quot;;</span><br><span class="line">    private static final String MINUTE = &quot;minute&quot;;</span><br><span class="line">    private static final String ID = &quot;id&quot;;</span><br><span class="line">    private AlarmManager alarmManager;</span><br><span class="line">    private PendingIntent paddingIntent;</span><br><span class="line">    private TestReceiver testReceiver;</span><br><span class="line">    private Context mContext;</span><br><span class="line">    private IntentFilter filter;</span><br><span class="line">    private boolean stopFlag = false;</span><br><span class="line"></span><br><span class="line">    public void setAlarmManager(Context context, int hour, int minute) &#123;</span><br><span class="line">        Log.i(TAG, &quot;setAlarmManager: &quot;);</span><br><span class="line">        mContext = context;</span><br><span class="line"></span><br><span class="line">        //设置时间</span><br><span class="line">        Calendar calendar = Calendar.getInstance();</span><br><span class="line">        calendar.set(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get</span><br><span class="line">                (Calendar.DAY_OF_MONTH), hour, minute, 0);</span><br><span class="line"></span><br><span class="line">        testReceiver = new TestReceiver();</span><br><span class="line">        filter = new IntentFilter();</span><br><span class="line">        filter.addAction(ACTION + hour + minute);</span><br><span class="line">        mContext.registerReceiver(testReceiver, filter);</span><br><span class="line"></span><br><span class="line">        alarmManager = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);</span><br><span class="line">        Intent intent = new Intent(ACTION + hour + minute);</span><br><span class="line">        intent.putExtra(HOUR, hour + &quot;&quot;);</span><br><span class="line">        intent.putExtra(MINUTE, minute + &quot;&quot;);</span><br><span class="line">        intent.putExtra(ID, minute + &quot;&quot;);</span><br><span class="line">        paddingIntent = PendingIntent.getBroadcast(context, hour + minute, intent, PendingIntent.FLAG_UPDATE_CURRENT);</span><br><span class="line">        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123;</span><br><span class="line">            alarmManager.setExactAndAllowWhileIdle(AlarmManager.ELAPSED_REALTIME_WAKEUP, calMethod(calendar.getTimeInMillis()), paddingIntent);</span><br><span class="line">        &#125; else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">            alarmManager.setExact(AlarmManager.RTC_WAKEUP, calMethod(calendar.getTimeInMillis()), paddingIntent);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, calMethod(calendar.getTimeInMillis()), TIME_INTERVAL, paddingIntent);</span><br><span class="line">        &#125;</span><br><span class="line">        stopFlag = false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param dateTime 传入的是时间戳（设置当天的年月日+从选择框拿来的时分秒）</span><br><span class="line">     * @return 返回起始闹钟时间的时间戳</span><br><span class="line">     */</span><br><span class="line">    private long calMethod(long dateTime) &#123;</span><br><span class="line">        long time = 0;</span><br><span class="line">        //weekflag == 0表示是按天为周期性的时间间隔或者是一次行的，weekfalg非0时表示每周几的闹钟并以周为时间间隔</span><br><span class="line"></span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        int week = c.get(Calendar.DAY_OF_WEEK);</span><br><span class="line">        if (1 == week) &#123;</span><br><span class="line">            week = 7;</span><br><span class="line">        &#125; else if (2 == week) &#123;</span><br><span class="line">            week = 1;</span><br><span class="line">        &#125; else if (3 == week) &#123;</span><br><span class="line">            week = 2;</span><br><span class="line">        &#125; else if (4 == week) &#123;</span><br><span class="line">            week = 3;</span><br><span class="line">        &#125; else if (5 == week) &#123;</span><br><span class="line">            week = 4;</span><br><span class="line">        &#125; else if (6 == week) &#123;</span><br><span class="line">            week = 5;</span><br><span class="line">        &#125; else if (7 == week) &#123;</span><br><span class="line">            week = 6;</span><br><span class="line">        &#125;</span><br><span class="line">        int weekflag = 0;</span><br><span class="line">        if (weeks != null) &#123;</span><br><span class="line">            for (int i = 0; i &lt; weeks.length; i++) &#123;</span><br><span class="line">                if (weeks[i] == null) &#123;</span><br><span class="line">                    continue;</span><br><span class="line">                &#125;</span><br><span class="line">                if (weeks[i] == week &amp;&amp; dateTime &gt; System.currentTimeMillis()) &#123;</span><br><span class="line">                    weeksIndex = i;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                if (weeks[i] &gt; week) &#123;</span><br><span class="line">                    weeksIndex = i;</span><br><span class="line">                    break;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    weeksIndex = 0;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (weeksIndex &lt; weeks.length) &#123;</span><br><span class="line">                if (weeks[weeksIndex] != null) &#123;</span><br><span class="line">                    weekflag = weeks[weeksIndex];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (weekflag == week) &#123;</span><br><span class="line">            if (dateTime &gt; System.currentTimeMillis()) &#123;</span><br><span class="line">                time = dateTime;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                time = dateTime + 7 * 24 * 3600 * 1000;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (weekflag &gt; week) &#123;</span><br><span class="line">            time = dateTime + (weekflag - week) * 24 * 3600 * 1000;</span><br><span class="line">        &#125; else if (weekflag &lt; week) &#123;</span><br><span class="line">            time = dateTime + (weekflag - week + 7) * 24 * 3600 * 1000;</span><br><span class="line">        &#125;</span><br><span class="line">        return time;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setWeeks(String[] weeks) &#123;</span><br><span class="line"></span><br><span class="line">        Integer[] a = new Integer[weeks.length - 1];</span><br><span class="line">        for (int i = 0; i &lt; weeks.length; i++) &#123;</span><br><span class="line">            if (!weeks[i].isEmpty()) &#123;</span><br><span class="line">                a[i - 1] = Integer.valueOf(weeks[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.weeks = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void cancel() &#123;</span><br><span class="line">        if (alarmManager != null &amp;&amp; paddingIntent != null) &#123;</span><br><span class="line">            alarmManager.cancel(paddingIntent);</span><br><span class="line">        &#125;</span><br><span class="line">        if (!stopFlag &amp;&amp; mContext != null) &#123;</span><br><span class="line">            mContext.unregisterReceiver(testReceiver);</span><br><span class="line">            stopFlag = true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public interface TimerManagerCallback &#123;</span><br><span class="line">        void onReceive(TimerManager timerManager);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public class TestReceiver extends BroadcastReceiver &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onReceive(Context context, Intent intent) &#123;</span><br><span class="line">            if (timerManagerCallback != null) &#123;</span><br><span class="line">                timerManagerCallback.onReceive(TimerManager.this);</span><br><span class="line">            &#125;</span><br><span class="line">            int hour = Integer.parseInt(intent.getStringExtra(HOUR));</span><br><span class="line">            int minute = Integer.parseInt(intent.getStringExtra(MINUTE));</span><br><span class="line">            Calendar calendar = Calendar.getInstance();</span><br><span class="line">            calendar.set(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get</span><br><span class="line">                    (Calendar.DAY_OF_MONTH), hour, minute, 0);</span><br><span class="line"></span><br><span class="line">            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123;</span><br><span class="line">                alarmManager.setExactAndAllowWhileIdle(AlarmManager.ELAPSED_REALTIME_WAKEUP, calMethod(calendar.getTimeInMillis()), paddingIntent);</span><br><span class="line">            &#125; else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">                alarmManager.setExact(AlarmManager.RTC_WAKEUP, calMethod(calendar.getTimeInMillis()), paddingIntent);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, calMethod(calendar.getTimeInMillis()), TIME_INTERVAL, paddingIntent);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setTimerManagerCallback(TimerManagerCallback timerManagerCallback) &#123;</span><br><span class="line">        this.timerManagerCallback = timerManagerCallback;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public TestReceiver getTestReceiver() &#123;</span><br><span class="line">        return testReceiver;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">startSlaveTimer = new TimerManager();</span><br><span class="line">    startSlaveTimer.setWeeks(new String[]&#123;&quot;&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;&#125;);</span><br><span class="line">    startSlaveTimer.setTimerManagerCallback(new TimerManager.TimerManagerCallback() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onReceive(TimerManager timerManager) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                // 这里是开启分机背光</span><br><span class="line">                Log.i(&quot;222222&quot;, &quot;定时器开启了分机背光&quot;);</span><br><span class="line"></span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    startSlaveTimer.setAlarmManager(context, Integer.parseInt(slaveTime.getStartHour()), Integer.parseInt(slaveTime.getStartMinute()));</span><br></pre></td></tr></table></figure><h4 id="取消"><a href="#取消" class="headerlink" title="取消"></a>取消</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (startSlaveTimer != null) &#123;</span><br><span class="line">         startSlaveTimer.cancel();</span><br><span class="line">         startSlaveTimer = null;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h3 id="4-视频合并"><a href="#4-视频合并" class="headerlink" title="4.视频合并"></a><span id = "appendmp4">4.视频合并</span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">在api23一下没有录制视频暂停功能，需要自己合并视频</span><br><span class="line">1.引入 compile &#x27;com.googlecode.mp4parser:isoparser:1.1.21&#x27;//视频处理</span><br><span class="line">2.主要方法</span><br><span class="line">//将两个mp4视频进行拼接</span><br><span class="line">    public static void appendMp4(List&lt;String&gt; mMp4List,String outputpath)&#123; </span><br><span class="line">     private static List&lt;Movie&gt; moviesList = new ArrayList&lt;&gt;();</span><br><span class="line">     private static List&lt;Track&gt; videoTracks = new ArrayList&lt;&gt;(); </span><br><span class="line">     private static List&lt;Track&gt; audioTracks = new ArrayList&lt;&gt;(); </span><br><span class="line">try &#123; </span><br><span class="line">for (int i=0;i&lt;mMp4List.size();i++) &#123; </span><br><span class="line">Movie movie=MovieCreator.build(mMp4List.get(i));</span><br><span class="line"> moviesList.add(movie); </span><br><span class="line">&#125; </span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line"> e.printStackTrace(); </span><br><span class="line">&#125; </span><br><span class="line">for (Movie m : moviesList) &#123; </span><br><span class="line">for (Track t : m.getTracks()) &#123; </span><br><span class="line">if (t.getHandler().equals(&quot;soun&quot;)) &#123; </span><br><span class="line">audioTracks.add(t); </span><br><span class="line">&#125; </span><br><span class="line">if (t.getHandler().equals(&quot;vide&quot;)) &#123;</span><br><span class="line"> videoTracks.add(t);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br><span class="line"> Movie result = new Movie();</span><br><span class="line"> try &#123; </span><br><span class="line">if (audioTracks.size() &gt; 0) &#123;</span><br><span class="line"> result.addTrack(new AppendTrack(audioTracks.toArray(new Track[audioTracks.size()]))); </span><br><span class="line">&#125; </span><br><span class="line">if (videoTracks.size() &gt; 0) &#123; </span><br><span class="line">result.addTrack(new AppendTrack(videoTracks.toArray(new Track[videoTracks.size()])));</span><br><span class="line"> &#125; </span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line"> e.printStackTrace(); </span><br><span class="line">&#125; </span><br><span class="line">Container out = new DefaultMp4Builder().build(result);</span><br><span class="line"> try &#123;</span><br><span class="line"> FileChannel fc = new FileOutputStream(new File(outputpath)).getChannel(); </span><br><span class="line">out.writeContainer(fc); </span><br><span class="line">fc.close(); </span><br><span class="line">&#125; catch (Exception e) &#123; </span><br><span class="line">e.printStackTrace();</span><br><span class="line"> &#125;</span><br><span class="line"> moviesList.clear();</span><br><span class="line">videoTracks.clear();</span><br><span class="line">audioTracks.clear();</span><br><span class="line">  for (int i = 0; i &lt; mMp4List.size(); i++) &#123;</span><br><span class="line">      deleteSingleFile(mMp4List.get(i));</span><br><span class="line">   &#125;</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">* 删除单个文件</span><br><span class="line">* @param filePathName 要删除的文件的文件名</span><br><span class="line">* @return 单个文件删除成功返回true，否则返回false  </span><br><span class="line">*/</span><br><span class="line">    </span><br><span class="line">private static void deleteSingleFile(String filePathName) &#123;</span><br><span class="line"> try &#123;</span><br><span class="line"> File file = new File(filePathName);</span><br><span class="line"> // 如果文件路径所对应的文件存在，并且是一个文件，则直接删除</span><br><span class="line">  if (file.exists() &amp;&amp; file.isFile()) &#123;</span><br><span class="line">  if (file.delete()) &#123;</span><br><span class="line">// Log.e(TAG, &quot;删除单个文件&quot; + filePathName + &quot;成功！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125; catch (Exception e) &#123;</span><br><span class="line">     e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="5-方法执行超过指定时间"><a href="#5-方法执行超过指定时间" class="headerlink" title="5.方法执行超过指定时间"></a><span id = "muchtime">5.方法执行超过指定时间</span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//执行超时的方法</span><br><span class="line">   ExecutorService executorService = Executors.newSingleThreadExecutor();</span><br><span class="line">                    Future&lt;String&gt; future = executorService.submit(task);</span><br><span class="line">                    try &#123;</span><br><span class="line">                        //3秒内没有执行完则抛超时异常</span><br><span class="line">                        String result = future.get(2, TimeUnit.SECONDS);</span><br><span class="line">                        Log.d(TAG, &quot;设置的result是：&quot; + result);</span><br><span class="line"></span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        Log.d(TAG, &quot;超时异常1：&quot; + e.toString());</span><br><span class="line"></span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125; catch (ExecutionException e) &#123;</span><br><span class="line">                        Log.d(TAG, &quot;超时异常2：&quot; + e.toString());</span><br><span class="line"></span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125; catch (TimeoutException e) &#123;</span><br><span class="line">                        Log.d(TAG, &quot;超时异常3：&quot; + e.toString());</span><br><span class="line">                        //这里可以做超时后执行操作</span><br><span class="line">//                        Looper.prepare();</span><br><span class="line">                        Toast.makeText(getApplicationContext(), &quot;摄像头出现问题，请检查摄像头&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">//                        Looper.loop();</span><br><span class="line">                        kill_camera();</span><br><span class="line">                        this.finish();</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">    Callable&lt;String&gt; task = new Callable&lt;String&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public String call() throws Exception &#123;</span><br><span class="line">            start();//执行的任务</span><br><span class="line">            return &quot;success&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="Android" scheme="https://zcccool.cn/tags/Android/"/>
    
    <category term="视频合并" scheme="https://zcccool.cn/tags/%E8%A7%86%E9%A2%91%E5%90%88%E5%B9%B6/"/>
    
  </entry>
  
  <entry>
    <title>阿里云Tomcat部署与配置</title>
    <link href="https://zcccool.cn/2018/11/08/%E9%98%BF%E9%87%8C%E4%BA%91Tomcat%E9%83%A8%E7%BD%B2%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
    <id>https://zcccool.cn/2018/11/08/%E9%98%BF%E9%87%8C%E4%BA%91Tomcat%E9%83%A8%E7%BD%B2%E4%B8%8E%E9%85%8D%E7%BD%AE/</id>
    <published>2018-11-08T15:11:14.000Z</published>
    <updated>2021-11-17T15:43:29.704Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://zccguagua.oss-cn-hangzhou.aliyuncs.com/images/blog/cover/cat.jpg" title="Image"></p><h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h3><p>下载两个文件<br>apache-tomcat-8.5.72.tar.gz<br>jdk-8u311-linux-x64.tar.gz<br>使用工具复制到/usr/local/java文件夹</p><h3 id="2-安装java"><a href="#2-安装java" class="headerlink" title="2.安装java"></a>2.安装java</h3><h5 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u311-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><h5 id="配置Java环境变量-进入编辑-vim-etc-profile"><a href="#配置Java环境变量-进入编辑-vim-etc-profile" class="headerlink" title="配置Java环境变量 进入编辑 vim /etc/profile"></a>配置Java环境变量 进入编辑 vim /etc/profile</h5><p>在文件最后添加下面的内容<br>(i 编辑,Esc 退出,:wq 保存退出,:q!退出)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_311</span><br><span class="line">export JRE_HOME=/usr/local/java/jdk1.8.0_311/jre</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH</span><br><span class="line">export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH</span><br></pre></td></tr></table></figure><p>添加完成后，使环境变量生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h5 id="检测是否成功"><a href="#检测是否成功" class="headerlink" title="检测是否成功"></a>检测是否成功</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><h3 id="3-安装tomcat"><a href="#3-安装tomcat" class="headerlink" title="3.安装tomcat"></a>3.安装tomcat</h3><h5 id="解压-1"><a href="#解压-1" class="headerlink" title="解压"></a>解压</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-tomcat-8.5.72.tar.gz</span><br></pre></td></tr></table></figure><p>进入tomcat路径/bin</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./startup.sh //启动命令</span><br><span class="line">./shutdown.sh //停止命令</span><br></pre></td></tr></table></figure><p>(注意：失败请检查8080端口是否开放，去服务器控制台安全组开启)</p><h3 id="4-配置直接通过地址访问"><a href="#4-配置直接通过地址访问" class="headerlink" title="4.配置直接通过地址访问"></a>4.配置直接通过地址访问</h3><p>进入conf修改server.xml<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;Connector port=&quot;80&quot; protocol=&quot;HTTP/1.1&quot; //端口改为80(需开放80端口)</span><br><span class="line"> &lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;地址/域名&quot;&gt; //地址</span><br><span class="line"> &lt;Host name=&quot;地址/域名&quot;  appBase=&quot;webapps&quot;</span><br><span class="line">            unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;</span><br><span class="line">&lt;Context path=&quot;&quot; docBase=&quot;/usr/local/java/apache-tomcat-8.5.72/webapps/项目名&quot; debug=&quot;0&quot; reloadable=&quot;true&quot; /&gt; //在Host之间加上</span><br></pre></td></tr></table></figure></p><h3 id="5-Tomcat-开机启动"><a href="#5-Tomcat-开机启动" class="headerlink" title="5.Tomcat 开机启动"></a>5.Tomcat 开机启动</h3><p>关闭Tomcat<br>编辑vim /etc/rc.d/rc.local<br>添加以下内容<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/jdk路径</span><br><span class="line">export JRE_HOME=$JAVA_HOME/jre</span><br><span class="line">sh /usr/local/tomcat路径/bin/startup.sh</span><br></pre></td></tr></table></figure></p><h3 id="6-服务器更新"><a href="#6-服务器更新" class="headerlink" title="6.服务器更新"></a>6.服务器更新</h3> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y update</span><br></pre></td></tr></table></figure><p>（rc.local需要有执行权限 chmod +x rc.local）<br>重启机器即可启动Tomcat</p><p>Tomcat日志在logs目录，进入目录查看日志：<br>tail -f catalina.out  </p><h3 id="查看tomcat是否返回判断是否配置成功"><a href="#查看tomcat是否返回判断是否配置成功" class="headerlink" title="查看tomcat是否返回判断是否配置成功"></a>查看tomcat是否返回判断是否配置成功</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl ip:端口号</span><br></pre></td></tr></table></figure><p>Mysql安装级部署参考下面链接<br><a href="https://blog.csdn.net/sihai12345/article/details/73381151?tdsourcetag=s_pcqq_aiomsg">阿里云服务器配置Mysql</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="阿里云" scheme="https://zcccool.cn/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
  </entry>
  
</feed>
